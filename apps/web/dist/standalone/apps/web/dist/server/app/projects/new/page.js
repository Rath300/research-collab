(()=>{var e={};e.id=248,e.ids=[248],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},24855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>h,tree:()=>c});var r=s(67096),a=s(16132),i=s(37284),n=s.n(i),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["projects",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,57991)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/projects/new/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,44599)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/shreyansh/ItsMightHappenApp/apps/web/app/projects/new/page.tsx"],p="/projects/new/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/new/page",pathname:"/projects/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81036:(e,t,s)=>{Promise.resolve().then(s.bind(s,49202))},49202:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>NewProjectPage});var r=s(30784),a=s(9885),i=s(83296),n=s(75042),l=s(57114),o=s(6568),c=s(66262);let d=i.z.object({title:i.z.string().min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),content:i.z.string().min(20,"Content must be at least 20 characters").max(1e4,"Content must be less than 10000 characters"),visibility:i.z.enum(["public","private","connections"]).default("public"),tags:i.z.array(i.z.string()).optional().nullable()});function NewProjectPage(){let e=(0,l.useRouter)(),t=(0,o.Wq)(),{user:s}=(0,c.tN)(),[i,p]=(0,a.useState)({title:"",content:"",visibility:"public",tags:[]}),[u,h]=(0,a.useState)({}),[m,x]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),[y,v]=(0,a.useState)(""),[j,f]=(0,a.useState)(null),handleInputChange=e=>{let{name:t,value:s,type:r}=e.target,a=s;"checkbox"===r&&(a=e.target.checked),"tags"===t&&(a=s.split(",").map(e=>e.trim()).filter(e=>e)),p(e=>({...e,[t]:a}))},validateForm=()=>{let e=d.safeParse(i);if(!e.success){let t={};return e.error.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),h(t),!1}return h({}),!0},handleSubmit=async s=>{if(s.preventDefault(),f(null),validateForm()){g(!0);try{let{data:{user:s},error:r}=await t.auth.getUser();if(r||!s)throw Error(r?.message||"User not authenticated");let a={user_id:s.id,title:i.title,content:i.content,visibility:i.visibility,tags:i.tags||null},{data:n,error:l}=await t.from("research_posts").insert(a).select().single();if(l)throw console.error("Research post creation error:",l),l;if(!n||!n.id)throw Error("No data returned after insert or ID missing");console.log("Research post created successfully:",n.id),e.push("/dashboard")}catch(e){console.error("Submission error:",e),f(e.message||"Failed to create research post. Please try again.")}finally{g(!1)}}};return r.jsx(n._,{title:"Create New Research Post",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto py-8",children:[j&&r.jsx("div",{className:"mb-6 p-4 bg-red-500 bg-opacity-20 border border-red-500 rounded-md",children:r.jsx("p",{className:"text-red-500",children:j})}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create a New Research Post"}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:["Title",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:handleInputChange,className:`w-full p-3 bg-gray-700 rounded-md border ${u.title?"border-red-500":"border-gray-600"}`,placeholder:"Give your research post a clear, descriptive title"}),u.title&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"content",className:"block text-sm font-medium mb-1",children:["Content",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"content",name:"content",value:i.content,onChange:handleInputChange,rows:5,className:`w-full p-3 bg-gray-700 rounded-md border ${u.content?"border-red-500":"border-gray-600"}`,placeholder:"Describe your research post in detail. What are the main points? What problem does it solve?"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[i.content.length,"/10000 characters"]}),u.content&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.content})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium mb-1",children:"Tags (comma-separated)"}),r.jsx("input",{type:"text",id:"tags",name:"tags",value:(i.tags||[]).join(", "),onChange:handleInputChange,className:`w-full p-3 bg-gray-700 rounded-md border ${u.tags?"border-red-500":"border-gray-600"}`,placeholder:"e.g. AI, healthcare, data analysis"}),u.tags&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.tags})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"visibility",className:"block text-sm font-medium mb-1",children:["Visibility",r.jsx("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"visibility",name:"visibility",value:i.visibility,onChange:handleInputChange,className:`w-full p-3 bg-gray-700 rounded-md border ${u.visibility?"border-red-500":"border-gray-600"}`,children:[r.jsx("option",{value:"public",children:"Public"}),r.jsx("option",{value:"private",children:"Private"}),r.jsx("option",{value:"connections",children:"Connections Only"})]}),u.visibility&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.visibility})]}),r.jsx("div",{className:"pt-6 flex justify-end",children:(0,r.jsxs)("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-researchbee-yellow text-black rounded-md hover:bg-yellow-500 flex items-center",children:[b&&r.jsx("div",{className:"mr-2 h-4 w-4 border-2 border-black border-t-transparent animate-spin rounded-full"}),"Create Research Post"]})})]})]})]})})}},57991:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(95153);let a=(0,r.createProxy)(String.raw`/Users/shreyansh/ItsMightHappenApp/apps/web/app/projects/new/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[998,450,505,316],()=>__webpack_exec__(24855));module.exports=s})();