(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{5892:function(e,t,a){Promise.resolve().then(a.bind(a,703))},703:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return SettingsPage}});var s=a(7437),l=a(2265),r=a(4033),i=a(2247),n=a(1844),c=a(231),o=a(4962),d=a(501),x=a(4630),m=a(1407),h=a(1767);function SettingsPage(){let e=(0,r.useRouter)(),{user:t,profile:a,setProfile:g}=(0,o.tN)(),[u,p]=(0,l.useState)(!0),[f,b]=(0,l.useState)(null);(0,l.useEffect)(()=>{let loadProfileData=async()=>{if(!t){e.push("/login");return}p(!0),b(null);try{if(!a||!a.updated_at){let e=await (0,d.Ai)(t.id);if(e){let t={...e,updated_at:e.updated_at?new Date(e.updated_at):null};g(t)}else throw Error("Profile data could not be fetched.")}}catch(e){console.error("Error loading profile on settings page:",e),b(e.message||"Failed to load profile data. Please try refreshing.")}finally{p(!1)}};t?loadProfileData():u||e.push("/login")},[t,a,g,e,u]);let j=a?{...a,full_name:"".concat(a.first_name||""," ").concat(a.last_name||"").trim(),research_interests:a.interests||[]}:void 0;return u?(0,s.jsx)(m._,{title:"Settings",className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 min-h-screen text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(c.dAq,{className:"animate-spin text-researchbee-yellow text-6xl mb-4"}),(0,s.jsx)("p",{className:"text-xl text-gray-300",children:"Loading your settings..."})]})}):f?(0,s.jsx)(m._,{title:"Error",className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 min-h-screen text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"glass-card p-8 rounded-xl shadow-lg text-center max-w-md w-full",children:[(0,s.jsx)(c.bcx,{className:"mx-auto text-red-400 text-5xl mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Oops! Something went wrong."}),(0,s.jsx)("p",{className:"text-gray-300 mb-6",children:f}),(0,s.jsx)(i.z,{variant:"primary",onClick:()=>e.refresh(),className:"w-full bg-researchbee-yellow hover:bg-researchbee-darkyellow text-black",children:"Try Again"})]})}):t&&j?(0,s.jsx)(m._,{title:"Account Settings",className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 min-h-screen text-white",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-12 sm:py-16 lg:py-20",children:[(0,s.jsx)("h1",{className:"text-4xl sm:text-5xl font-bold mb-12 sm:mb-16 text-center tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-orange-400",children:"Account Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 lg:gap-12",children:[(0,s.jsx)("div",{className:"md:col-span-4 lg:col-span-3",children:(0,s.jsx)(n.Zb,{className:"glass-card sticky top-24 shadow-xl",children:(0,s.jsxs)(n.aY,{className:"p-6 flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-32 h-32 rounded-full bg-black/20 backdrop-blur-md border-2 border-white/10 flex items-center justify-center overflow-hidden mb-5 shadow-lg transition-all duration-300 hover:scale-105 group",children:(0,s.jsx)(h.q,{src:null==j?void 0:j.avatar_url,alt:"Profile Avatar",size:"lg",className:"group-hover:opacity-80 transition-opacity",fallback:(0,s.jsx)(c.fzv,{className:"text-gray-400 group-hover:text-researchbee-yellow transition-colors",size:60})})}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-white truncate max-w-full px-2",children:"".concat((null==j?void 0:j.first_name)||""," ").concat((null==j?void 0:j.last_name)||"").trim()||"User Name"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1.5 break-all px-2",children:(null==t?void 0:t.email)||"user@example.com"})]})})}),(0,s.jsx)("div",{className:"md:col-span-8 lg:col-span-9",children:(0,s.jsxs)(n.Zb,{className:"glass-card shadow-xl",children:[(0,s.jsxs)(n.Ol,{className:"border-b border-white/10 pb-4",children:[(0,s.jsx)(n.ll,{className:"text-2xl sm:text-3xl font-semibold text-white",children:"Profile Information"}),(0,s.jsx)(n.SZ,{className:"text-gray-300 mt-1",children:"Keep your personal details and preferences up to date."})]}),(0,s.jsx)(n.aY,{className:"pt-6",children:(0,s.jsx)(x.r,{initialData:j,onProfileUpdate:()=>{}})})]})})]})]})}):(u||e.push("/login"),(0,s.jsx)(m._,{title:"Settings",className:"bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 min-h-screen text-white flex items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(c.dAq,{className:"animate-spin text-researchbee-yellow text-6xl mb-4"}),(0,s.jsx)("p",{className:"text-xl text-gray-300",children:"Preparing settings..."})," "]})}))}}},function(e){e.O(0,[238,683,74,588,691,169,568,971,472,744],function(){return e(e.s=5892)}),_N_E=e.O()}]);