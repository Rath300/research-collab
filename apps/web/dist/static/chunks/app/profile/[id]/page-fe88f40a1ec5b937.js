(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{7400:function(e,s,r){Promise.resolve().then(r.bind(r,7330))},7330:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return ProfilePage}});var a=r(7437),t=r(2265),i=r(4033),l=r(1844),n=r(2247),c=r(1654),d=r(1767),o=r(231),m=r(4962),x=r(4510);function TabComponent(e){let{active:s,onClick:r,children:t}=e;return(0,a.jsx)("button",{onClick:r,className:"pb-4 text-sm font-medium border-b-2 ".concat(s?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),children:t})}function ProfilePage(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),{user:r}=(0,m.tN)(),[h,p]=(0,t.useState)(null),[j,u]=(0,t.useState)([]),[f,b]=(0,t.useState)(!0),[N,y]=(0,t.useState)(""),[g,v]=(0,t.useState)("posts"),[w,k]=(0,t.useState)(!1),[_,C]=(0,t.useState)(!1),I=null==e?void 0:e.id,z=(null==r?void 0:r.id)===I,P=(0,x.AY)("https://yltnvmypasnfdgtnyhwg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw"),q=(0,t.useCallback)(async()=>{try{b(!0),y("");let{data:e,error:s}=await P.from("profiles").select("*").eq("id",I).single();if(s)throw s;p(e);let{data:a,error:t}=await P.from("research_posts").select("*, profiles:user_id (*)").eq("user_id",I).order("created_at",{ascending:!1});if(t)throw t;if(u(a||[]),r&&!z){let{data:e,error:s}=await P.from("profile_matches").select("*").eq("matcher_user_id",r.id).eq("matchee_user_id",I).single();if(s&&"PGRST116"!==s.code)throw s;k(!!e)}}catch(e){console.error("Error loading profile:",e),y(e.message||"Failed to load profile")}finally{b(!1)}},[I,P,r,z]);(0,t.useEffect)(()=>{q()},[I,q]);let handleConnect=async()=>{if(r&&!z)try{C(!0);let{error:e}=await P.from("profile_matches").insert({matcher_user_id:r.id,matchee_user_id:I,status:"matched"});if(e)throw e;k(!0)}catch(e){console.error("Error connecting:",e)}finally{C(!1)}};return f?(0,a.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8 flex justify-center items-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-b-2 border-t-2 border-primary-600"})}):N||!h?(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl px-4 py-8 text-center",children:[(0,a.jsx)(o.fzv,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Profile Not Found"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:N||"The requested profile could not be found"}),(0,a.jsx)(n.z,{onClick:()=>s.push("/dashboard"),children:"Go to Dashboard"})]}):(0,a.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:(0,a.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"relative h-48 bg-gradient-to-r from-primary-600 to-primary-400",children:(0,a.jsx)("div",{className:"absolute -bottom-16 left-8",children:(0,a.jsx)("div",{className:"h-32 w-32 rounded-full border-4 border-white dark:border-slate-800 bg-white dark:bg-slate-700 overflow-hidden",children:(0,a.jsx)(d.q,{src:h.avatar_url,alt:"".concat(h.first_name," ").concat(h.last_name),size:"xl",fallback:(0,a.jsx)(o.fzv,{className:"text-gray-400",size:64})})})})}),(0,a.jsxs)("div",{className:"pt-20 px-8 pb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[h.first_name," ",h.last_name]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:h.title||"No title"})]}),!z&&(0,a.jsx)(n.z,{onClick:handleConnect,disabled:w||_,className:"flex items-center",children:_?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.WY8,{className:"mr-2"}),"Connected"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.WY8,{className:"mr-2"}),"Connect"]})})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,a.jsxs)("div",{className:"flex space-x-8",children:[(0,a.jsx)(TabComponent,{active:"posts"===g,onClick:()=>v("posts"),children:"Posts"}),(0,a.jsx)(TabComponent,{active:"about"===g,onClick:()=>v("about"),children:"About"})]})}),"posts"===g?(0,a.jsx)("div",{className:"space-y-6",children:j.length>0?j.map(e=>(0,a.jsx)(c.o,{post:e,onLike:()=>{},onBoost:()=>{}},e.id)):(0,a.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-lg shadow",children:[(0,a.jsx)(o.l1M,{size:32,className:"mx-auto text-gray-300 dark:text-gray-600 mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No research posts yet"}),z&&(0,a.jsx)(n.z,{className:"mt-4",onClick:()=>s.push("/research/new"),children:"Create Post"})]})}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Research Interests"})}),(0,a.jsx)(l.aY,{children:h.interests&&h.interests.length>0?(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.interests.map(e=>(0,a.jsxs)("div",{className:"bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-sm flex items-center dark:bg-primary-900/30 dark:text-primary-300",children:[(0,a.jsx)(o.l1M,{className:"mr-1",size:14}),e]},e))}):(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No research interests specified"})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Contact Information"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[h.email&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Imn,{className:"text-gray-400 mr-2"}),(0,a.jsx)("a",{href:"mailto:".concat(h.email),className:"text-primary-600 hover:underline",children:h.email})]}),h.website&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.XKb,{className:"text-gray-400 mr-2"}),(0,a.jsx)("a",{href:h.website,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline",children:h.website})]}),h.location&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.i63,{className:"text-gray-400 mr-2"}),(0,a.jsx)("span",{children:h.location})]})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Additional Information"})}),(0,a.jsxs)(l.aY,{className:"space-y-4",children:[h.institution&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.RsK,{className:"text-gray-400 mr-2"}),(0,a.jsx)("span",{children:h.institution})]}),h.availability_hours&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.TCC,{className:"text-gray-400 mr-2"}),(0,a.jsxs)("span",{children:[h.availability_hours," hours/week"]})]}),h.project_preference&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.xUG,{className:"text-gray-400 mr-2"}),(0,a.jsxs)("span",{className:"capitalize",children:[h.project_preference," projects"]})]})]})]})]})]})]})})}}},function(e){e.O(0,[238,683,326,74,691,501,304,65,971,472,744],function(){return e(e.s=7400)}),_N_E=e.O()}]);