(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{7864:function(e,t,s){Promise.resolve().then(s.bind(s,6799))},6799:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return NewProjectPage}});var r=s(7437),a=s(2265),n=s(8449),i=s(2141),l=s(4033),o=s(2445),c=s(4962);let d=n.z.object({title:n.z.string().min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters"),content:n.z.string().min(20,"Content must be at least 20 characters").max(1e4,"Content must be less than 10000 characters"),visibility:n.z.enum(["public","private","connections"]).default("public"),tags:n.z.array(n.z.string()).optional().nullable()});function NewProjectPage(){let e=(0,l.useRouter)(),t=(0,o.Wq)(),{user:s}=(0,c.tN)(),[n,u]=(0,a.useState)({title:"",content:"",visibility:"public",tags:[]}),[h,b]=(0,a.useState)({}),[m,p]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[f,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),handleInputChange=e=>{let{name:t,value:s,type:r}=e.target,a=s;"checkbox"===r&&(a=e.target.checked),"tags"===t&&(a=s.split(",").map(e=>e.trim()).filter(e=>e)),u(e=>({...e,[t]:a}))},validateForm=()=>{let e=d.safeParse(n);if(!e.success){let t={};return e.error.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),b(t),!1}return b({}),!0},handleSubmit=async s=>{if(s.preventDefault(),j(null),validateForm()){x(!0);try{let{data:{user:s},error:r}=await t.auth.getUser();if(r||!s)throw Error((null==r?void 0:r.message)||"User not authenticated");let a={user_id:s.id,title:n.title,content:n.content,visibility:n.visibility,tags:n.tags||null},{data:i,error:l}=await t.from("research_posts").insert(a).select().single();if(l)throw console.error("Research post creation error:",l),l;if(!i||!i.id)throw Error("No data returned after insert or ID missing");console.log("Research post created successfully:",i.id),e.push("/dashboard")}catch(e){console.error("Submission error:",e),j(e.message||"Failed to create research post. Please try again.")}finally{x(!1)}}};return(0,r.jsx)(i._,{title:"Create New Research Post",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto py-8",children:[v&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-500 bg-opacity-20 border border-red-500 rounded-md",children:(0,r.jsx)("p",{className:"text-red-500",children:v})}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create a New Research Post"}),(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:["Title",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"title",name:"title",value:n.title,onChange:handleInputChange,className:"w-full p-3 bg-gray-700 rounded-md border ".concat(h.title?"border-red-500":"border-gray-600"),placeholder:"Give your research post a clear, descriptive title"}),h.title&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"content",className:"block text-sm font-medium mb-1",children:["Content",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"content",name:"content",value:n.content,onChange:handleInputChange,rows:5,className:"w-full p-3 bg-gray-700 rounded-md border ".concat(h.content?"border-red-500":"border-gray-600"),placeholder:"Describe your research post in detail. What are the main points? What problem does it solve?"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[n.content.length,"/10000 characters"]}),h.content&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.content})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium mb-1",children:"Tags (comma-separated)"}),(0,r.jsx)("input",{type:"text",id:"tags",name:"tags",value:(n.tags||[]).join(", "),onChange:handleInputChange,className:"w-full p-3 bg-gray-700 rounded-md border ".concat(h.tags?"border-red-500":"border-gray-600"),placeholder:"e.g. AI, healthcare, data analysis"}),h.tags&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.tags})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"visibility",className:"block text-sm font-medium mb-1",children:["Visibility",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"visibility",name:"visibility",value:n.visibility,onChange:handleInputChange,className:"w-full p-3 bg-gray-700 rounded-md border ".concat(h.visibility?"border-red-500":"border-gray-600"),children:[(0,r.jsx)("option",{value:"public",children:"Public"}),(0,r.jsx)("option",{value:"private",children:"Private"}),(0,r.jsx)("option",{value:"connections",children:"Connections Only"})]}),h.visibility&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-500",children:h.visibility})]}),(0,r.jsx)("div",{className:"pt-6 flex justify-end",children:(0,r.jsxs)("button",{type:"submit",disabled:g,className:"px-6 py-2 bg-researchbee-yellow text-black rounded-md hover:bg-yellow-500 flex items-center",children:[g&&(0,r.jsx)("div",{className:"mr-2 h-4 w-4 border-2 border-black border-t-transparent animate-spin rounded-full"}),"Create Research Post"]})})]})]})]})})}},6908:function(e,t,s){"use strict";s.d(t,{z:function(){return Button}});var r=s(7437);s(2265);var a=s(1396),n=s.n(a);function Button(e){let{variant:t="primary",size:s="medium",isLoading:a=!1,fullWidth:i=!1,leftIcon:l,rightIcon:o,disabled:c,href:d,children:u,onClick:h,type:b="button",...m}=e,p=function(e,t,s,r){let a="";switch(t){case"small":a="px-3 py-1.5 text-sm";break;case"large":a="px-6 py-3 text-lg";break;default:a="px-4 py-2"}let n="";switch(e){case"primary":n=r?"bg-gray-500 text-gray-300":"bg-researchbee-yellow text-black hover:bg-yellow-500 active:bg-yellow-600";break;case"secondary":n=r?"bg-gray-700 text-gray-400":"bg-researchbee-medium-gray text-white hover:bg-gray-600 active:bg-gray-700";break;case"outline":n=r?"border border-gray-600 text-gray-400":"border border-researchbee-yellow text-researchbee-yellow hover:bg-researchbee-yellow/10 active:bg-researchbee-yellow/20";break;case"danger":n=r?"bg-red-900 text-red-300":"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"}return"".concat("flex flex-row items-center justify-center rounded-lg transition-colors"," ").concat(a," ").concat(n," ").concat(s?"w-full":"")}(t,s,i,c),g=(0,r.jsxs)(r.Fragment,{children:[a&&(0,r.jsx)("div",{className:"mr-2",children:(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"})}),!a&&l&&(0,r.jsx)("span",{className:"mr-2",children:l}),u,!a&&o&&(0,r.jsx)("span",{className:"ml-2",children:o})]});return d?(0,r.jsx)(n(),{href:d,passHref:!0,children:(0,r.jsx)("button",{disabled:c||a,className:p,onClick:h,type:b,...m,children:g})}):(0,r.jsx)("button",{disabled:c||a,className:p,onClick:h,type:b,...m,children:g})}},2141:function(e,t,s){"use strict";s.d(t,{_:function(){return PageContainer}});var r=s(7437);s(2265);var a=s(3574),n=s.n(a);function PageContainer(e){let{title:t,description:s,children:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n(),{children:[(0,r.jsx)("title",{children:"".concat(t," | ItsMightHappen")}),s&&(0,r.jsx)("meta",{name:"description",content:s})]}),(0,r.jsx)("main",{className:"min-h-screen bg-researchbee-black text-white p-4 md:p-6",children:a})]})}s(6908)},4962:function(e,t,s){"use strict";s.d(t,{tN:function(){return a}});var r=s(3265);let a=(0,r.Ue)(e=>({user:null,profile:null,isLoading:!0,setUser:t=>e({user:t}),setProfile:t=>e({profile:t}),setLoading:t=>e({isLoading:t}),signOut:()=>e({user:null,profile:null,isLoading:!1}),clearAuth:()=>e({user:null,profile:null,isLoading:!1})}));(0,r.Ue)(e=>({swipedUsers:[],likedUsers:[],matches:[],addSwipedUser:t=>e(e=>({swipedUsers:[...e.swipedUsers,t]})),addLikedUser:t=>e(e=>({likedUsers:[...e.likedUsers,t]})),setMatches:t=>e({matches:t}),addMatch:t=>e(e=>({matches:[...e.matches,t]})),resetSwipeState:()=>e({swipedUsers:[],likedUsers:[]})})),(0,r.Ue)(e=>({currentChatUserId:null,unreadMessages:{},setCurrentChatUserId:t=>e({currentChatUserId:t}),setUnreadCount:(t,s)=>e(e=>({unreadMessages:{...e.unreadMessages,[t]:s}})),incrementUnreadCount:t=>e(e=>({unreadMessages:{...e.unreadMessages,[t]:(e.unreadMessages[t]||0)+1}})),resetUnreadCount:t=>e(e=>({unreadMessages:{...e.unreadMessages,[t]:0}}))})),(0,r.Ue)(e=>({sidebarOpen:!1,darkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:t=>e({sidebarOpen:t}),toggleDarkMode:()=>e(e=>({darkMode:!e.darkMode})),setDarkMode:t=>e({darkMode:t})})),(0,r.Ue)(e=>({posts:[],isLoading:!1,hasMore:!0,setPosts:t=>e({posts:t}),appendPosts:t=>e(e=>({posts:[...e.posts,...t]})),setLoading:t=>e({isLoading:t}),setHasMore:t=>e({hasMore:t}),resetPosts:()=>e({posts:[],hasMore:!0})}))},2445:function(e,t,s){"use strict";s.d(t,{Wq:function(){return getBrowserClient}});var r=s(4683);let SupabaseError=class SupabaseError extends Error{constructor(e,t=400,s){super(e),this.name="SupabaseError",this.status=t,this.code=s}};let a="https://yltnvmypasnfdgtnyhwg.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw";a&&n||console.error("Missing Supabase environment variables");let i=null;function getBrowserClient(){return i||(i=function(){if(!a||!n)throw new SupabaseError("Missing Supabase environment variables",500);return(0,r.eI)(a,n,{auth:{persistSession:!0,autoRefreshToken:!0}})}())}},3574:function(e,t){"use strict";function NoopHead(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return NoopHead}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1396:function(e,t,s){e.exports=s(8326)},4033:function(e,t,s){e.exports=s(94)}},function(e){e.O(0,[326,358,588,971,472,744],function(){return e(e.s=7864)}),_N_E=e.O()}]);