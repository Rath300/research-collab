(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{9577:function(e,r,s){Promise.resolve().then(s.bind(s,8700))},8700:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return UpdatePasswordPage}});var t=s(7437),n=s(2265),a=s(4033),i=s(1396),l=s.n(i),o=s(2247),c=s(9812),d=s(1844),u=s(8980),h=s(2445);function UpdatePasswordPage(){let e=(0,a.useRouter)(),[r,s]=(0,n.useState)(""),[i,f]=(0,n.useState)(""),[x,m]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),[g,w]=(0,n.useState)(""),y=(0,h.Wq)();(0,n.useEffect)(()=>{let checkSession=async()=>{let{data:r,error:s}=await y.auth.getSession();if(s){console.error("Error getting session:",s),w("Could not verify your session. Please try resetting your password again.");return}r.session||window.location.hash.includes("access_token")||(window.location.hash.includes("error_code=401")?w("Password reset link has expired or is invalid. Please request a new one."):window.location.hash.includes("error")&&w("An error occurred with the password reset link. Please try again."),setTimeout(()=>e.push("/login"),3e3))};checkSession()},[e,y]);let handleSubmit=async s=>{if(s.preventDefault(),!r||!i){w("Please fill in all fields");return}if(r!==i){w("Passwords do not match");return}if(r.length<8){w("Password must be at least 8 characters");return}try{m(!0),w("");let{error:s}=await y.auth.updateUser({password:r});if(s)throw s;b(!0),setTimeout(()=>{e.push("/login")},3e3)}catch(e){console.error("Update password error:",e),w(e.message||"Failed to update password. Please try again.")}finally{m(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-slate-900 px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:[(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)(l(),{href:"/",className:"inline-block",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,t.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-lg font-bold text-white",children:"#"})}),(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"ResearchCollab"})]})})}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[(0,t.jsx)(d.ll,{children:"Update your password"}),(0,t.jsx)(d.SZ,{children:"Create a new password for your account"})]}),p?(0,t.jsx)(d.aY,{className:"pt-4 pb-6",children:(0,t.jsxs)("div",{className:"bg-green-50 text-green-600 p-4 rounded-md flex items-center space-x-3 text-sm dark:bg-green-900/20 dark:text-green-400",children:[(0,t.jsx)(u._rq,{className:"h-5 w-5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Password updated successfully!"}),(0,t.jsx)("p",{className:"mt-1",children:"You'll be redirected to the login page shortly."})]})]})}):(0,t.jsxs)("form",{onSubmit:handleSubmit,children:[(0,t.jsxs)(d.aY,{className:"space-y-4",children:[g&&(0,t.jsxs)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md flex items-center space-x-2 text-sm dark:bg-red-900/20 dark:text-red-400",children:[(0,t.jsx)(u.bcx,{className:"h-5 w-5 flex-shrink-0"}),(0,t.jsx)("span",{children:g})]}),(0,t.jsx)(c.I,{label:"New Password",type:"password",placeholder:"••••••••",value:r,onChange:e=>s(e.target.value),leftIcon:(0,t.jsx)(u.UIZ,{}),required:!0}),(0,t.jsx)(c.I,{label:"Confirm Password",type:"password",placeholder:"••••••••",value:i,onChange:e=>f(e.target.value),leftIcon:(0,t.jsx)(u.UIZ,{}),required:!0})]}),(0,t.jsx)(d.eW,{className:"flex flex-col space-y-4",children:(0,t.jsx)(o.z,{type:"submit",isLoading:x,isFullWidth:!0,children:"Update Password"})})]})]})]})})}},2247:function(e,r,s){"use strict";s.d(r,{z:function(){return l}});var t=s(7437),n=s(2265),a=s(9654),i=s(794);let l=n.forwardRef((e,r)=>{let{children:s,className:n,variant:l="primary",size:o="md",isLoading:c=!1,isFullWidth:d=!1,leftIcon:u,rightIcon:h,disabled:f,...x}=e;return(0,t.jsxs)("button",{ref:r,className:(0,a.m6)((0,i.W)("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{primary:"bg-researchbee-yellow text-black hover:bg-researchbee-yellow-dark focus-visible:ring-researchbee-yellow",secondary:"bg-purple-600 text-white hover:bg-purple-700 focus-visible:ring-purple-500",accent:"bg-pink-600 text-white hover:bg-pink-700 focus-visible:ring-pink-500",outline:"border border-gray-300 bg-transparent text-gray-300 hover:bg-gray-700/70 hover:text-white focus-visible:ring-gray-400",ghost:"bg-transparent hover:bg-gray-700/70 text-gray-300 hover:text-white",danger:"border border-red-500 bg-transparent text-red-500 hover:bg-red-500/20 hover:text-red-400 focus-visible:ring-red-400"}[l],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base"}[o],d?"w-full":"",n)),disabled:f||c,...x,children:[c&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!c&&u&&(0,t.jsx)("span",{className:"mr-2",children:u}),s,!c&&h&&(0,t.jsx)("span",{className:"ml-2",children:h})]})});l.displayName="Button"},1844:function(e,r,s){"use strict";s.d(r,{Ol:function(){return CardHeader},SZ:function(){return CardDescription},Zb:function(){return Card},aY:function(){return CardContent},eW:function(){return CardFooter},ll:function(){return CardTitle}});var t=s(7437);s(2265);var n=s(9654);let Card=e=>{let{children:r,className:s,hover:a=!1}=e;return(0,t.jsx)("div",{className:(0,n.m6)("rounded-lg bg-white p-6 shadow-card transition-shadow dark:bg-slate-800",a&&"hover:shadow-card-hover",s),children:r})},CardHeader=e=>{let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,n.m6)("mb-4",s),children:r})},CardTitle=e=>{let{children:r,className:s}=e;return(0,t.jsx)("h3",{className:(0,n.m6)("text-xl font-bold tracking-tight",s),children:r})},CardDescription=e=>{let{children:r,className:s}=e;return(0,t.jsx)("p",{className:(0,n.m6)("text-sm text-gray-500 dark:text-gray-400",s),children:r})},CardContent=e=>{let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,n.m6)("",s),children:r})},CardFooter=e=>{let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,n.m6)("mt-4 flex items-center",s),children:r})}},9812:function(e,r,s){"use strict";s.d(r,{I:function(){return l}});var t=s(7437),n=s(2265),a=s(794),i=s(9654);function cn(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,i.m6)((0,a.W)(r))}let l=(0,n.forwardRef)((e,r)=>{let{className:s,type:n,...a}=e,i=cn("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s);return"textarea"===n?(0,t.jsx)("textarea",{className:cn(i,"h-auto min-h-[80px]"),ref:r,...a}):(0,t.jsx)("input",{type:n,className:cn(i,"h-10"),ref:r,...a})});l.displayName="Input"},2445:function(e,r,s){"use strict";s.d(r,{Wq:function(){return getBrowserClient}});var t=s(4683);let SupabaseError=class SupabaseError extends Error{constructor(e,r=400,s){super(e),this.name="SupabaseError",this.status=r,this.code=s}};let n="https://yltnvmypasnfdgtnyhwg.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw";n&&a||console.error("Missing Supabase environment variables");let i=null;function getBrowserClient(){return i||(i=function(){if(!n||!a)throw new SupabaseError("Missing Supabase environment variables",500);return(0,t.eI)(n,a,{auth:{persistSession:!0,autoRefreshToken:!0}})}())}},1396:function(e,r,s){e.exports=s(8326)},4033:function(e,r,s){e.exports=s(94)}},function(e){e.O(0,[326,358,980,74,971,472,744],function(){return e(e.s=9577)}),_N_E=e.O()}]);