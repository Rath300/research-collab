(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{1407:function(e,t,l){"use strict";l.d(t,{_:function(){return PageContainer}});var r=l(7437);l(2265);var a=l(3574),i=l.n(a);function PageContainer(e){let{title:t,children:l,className:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(t," | ResearchCollab")})}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8 ".concat(a||""),children:l})]})}},4630:function(e,t,l){"use strict";l.d(t,{r:function(){return ProfileForm}});var r=l(7437),a=l(2265),i=l(2445),s=l(4033),n=l(2247),o=l(4977),d=l(4962),c=l(501),u=l(231),h=l(1767);function ProfileForm(e){let{initialData:t,onProfileUpdate:l}=e,m=(0,s.useRouter)(),b=(0,i.Wq)(),{user:p,setProfile:f}=(0,d.tN)(),[x,v]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null),[w,j]=(0,a.useState)(null),[_,N]=(0,a.useState)({full_name:(null==t?void 0:t.full_name)||"",bio:(null==t?void 0:t.bio)||"",institution:(null==t?void 0:t.institution)||"",research_interests:(null==t?void 0:t.research_interests)||[],skills:(null==t?void 0:t.skills)||[],collaboration_pitch:(null==t?void 0:t.collaboration_pitch)||"",location:(null==t?void 0:t.location)||"",field_of_study:(null==t?void 0:t.field_of_study)||"",availability:(null==t?void 0:t.availability)||"full-time",website:(null==t?void 0:t.website)||""}),[k,C]=(0,a.useState)(null),[I,S]=(0,a.useState)((null==t?void 0:t.avatar_url)||null),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{t&&(N({full_name:t.full_name||"",bio:t.bio||"",institution:t.institution||"",research_interests:t.research_interests||[],skills:t.skills||[],collaboration_pitch:t.collaboration_pitch||"",location:t.location||"",field_of_study:t.field_of_study||"",availability:t.availability||"full-time",website:t.website||""}),t.avatar_url&&S(t.avatar_url))},[t]);let handleInputChange=e=>{let{name:t,value:l}=e.target;N(e=>({...e,[t]:l}))},handleSubmit=async e=>{e.preventDefault(),y(null),j(null),v(!0);try{if(!p)throw Error("Not authenticated");let e=_.full_name.trim().split(/\s+/),v=e[0]||"",y=e.slice(1).join(" ")||"",w=I;if(k){let e=await (0,c.gg)(p.id,k);e&&"string"==typeof e.url?w=e.url:console.warn("Avatar upload failed or did not return a URL. Using existing avatar_url or preview.")}let N={id:p.id,user_id:p.id,first_name:v,last_name:y,bio:_.bio,institution:_.institution,interests:_.research_interests,skills:_.skills,collaboration_pitch:_.collaboration_pitch,location:_.location,field_of_study:_.field_of_study,availability:_.availability,website:_.website,avatar_url:w,updated_at:new Date().toISOString()},{data:C,error:S}=await b.from("profiles").upsert(N).select("id, user_id, first_name, last_name, email, avatar_url, institution, bio, website, skills, interests, collaboration_pitch, location, field_of_study, availability, updated_at").single();if(S)throw S;if(j("Profile saved successfully!"),C){var t,r,a,i,s,n,o,d,u,h,x,g;let e={id:C.id,user_id:C.user_id,first_name:null!==(t=C.first_name)&&void 0!==t?t:null,last_name:null!==(r=C.last_name)&&void 0!==r?r:null,email:null!==(a=C.email)&&void 0!==a?a:null,avatar_url:null!==(i=C.avatar_url)&&void 0!==i?i:null,institution:null!==(s=C.institution)&&void 0!==s?s:null,bio:null!==(n=C.bio)&&void 0!==n?n:null,website:null!==(o=C.website)&&void 0!==o?o:null,skills:null!==(d=C.skills)&&void 0!==d?d:[],interests:null!==(u=C.interests)&&void 0!==u?u:[],collaboration_pitch:null!==(h=C.collaboration_pitch)&&void 0!==h?h:null,location:null!==(x=C.location)&&void 0!==x?x:null,field_of_study:null!==(g=C.field_of_study)&&void 0!==g?g:null,availability:C.availability,updated_at:C.updated_at?new Date(C.updated_at):null};f(e)}else S||console.warn("Profile upsert successful but no data returned.");l&&l(),m.refresh()}catch(e){y(e instanceof Error?e.message:"An unexpected error occurred. Please try again.")}finally{v(!1)}},handleInterestAdd=e=>{let t=e.trim();t&&!_.research_interests.includes(t)&&N(e=>({...e,research_interests:[...e.research_interests,t]}))},handleInterestRemove=e=>{N(t=>({...t,research_interests:t.research_interests.filter(t=>t!==e)}))},handleSkillAdd=e=>{let t=e.trim();t&&!_.skills.includes(t)&&N(e=>({...e,skills:[...e.skills,t]}))},handleSkillRemove=e=>{N(t=>({...t,skills:t.skills.filter(t=>t!==e)}))},F="block text-sm font-medium text-gray-200 mb-1.5",P="w-full",R="flex items-center bg-purple-600/70 text-white px-3 py-1.5 rounded-full text-xs font-medium backdrop-blur-sm border border-purple-500/50 shadow-sm",z="ml-2 text-purple-200 hover:text-white focus:outline-none";return(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-full bg-white/10 backdrop-blur-md border border-white/20 flex items-center justify-center overflow-hidden shadow-lg",children:(0,r.jsx)(h.q,{src:I,alt:"Profile Avatar",size:"xl",fallback:(0,r.jsx)(u.fzv,{className:"text-gray-400",size:60})})}),(0,r.jsx)(n.z,{type:"button",variant:"glass",size:"sm",className:"absolute -bottom-2 -right-2 !p-2 rounded-full shadow-md",onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},"aria-label":"Change profile photo",children:(0,r.jsx)(u.Yjd,{size:16})})]}),(0,r.jsx)("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:e=>{var t;let l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!l)return;let r=new FileReader;r.onloadend=()=>{S(r.result)},r.readAsDataURL(l),C(l)}})]}),g&&(0,r.jsxs)("div",{className:"p-3 bg-red-600/40 border border-red-500/60 rounded-lg text-white text-sm backdrop-blur-sm flex items-center space-x-2",children:[(0,r.jsx)(u.bcx,{className:"h-5 w-5 flex-shrink-0"}),(0,r.jsx)("span",{children:g})]}),w&&(0,r.jsxs)("div",{className:"p-3 bg-green-600/40 border border-green-500/60 rounded-lg text-white text-sm backdrop-blur-sm flex items-center space-x-2",children:[(0,r.jsx)(u._rq,{className:"h-5 w-5 flex-shrink-0"}),(0,r.jsx)("span",{children:w})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"full_name",className:F,children:"Full Name"}),(0,r.jsx)(o.I,{id:"full_name",name:"full_name",value:_.full_name,onChange:handleInputChange,required:!0,placeholder:"e.g., Ada Lovelace",className:P})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"institution",className:F,children:"Institution"}),(0,r.jsx)(o.I,{id:"institution",name:"institution",value:_.institution,onChange:handleInputChange,placeholder:"e.g., University of Research",className:P})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bio",className:F,children:"Bio"}),(0,r.jsx)(o.I,{id:"bio",name:"bio",type:"textarea",value:_.bio,onChange:handleInputChange,placeholder:"Tell us about yourself, your research, and what you're looking for...",rows:4,className:P})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"collaboration_pitch",className:F,children:"Collaboration Pitch / Top Project Idea"}),(0,r.jsx)(o.I,{id:"collaboration_pitch",name:"collaboration_pitch",type:"textarea",value:_.collaboration_pitch,onChange:handleInputChange,placeholder:"Describe a project you'd love to collaborate on, or an idea you're passionate about (max 1000 chars).",rows:5,maxLength:1e3,className:P}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"This will be shown to others in profile matching."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"location",className:F,children:"Location"}),(0,r.jsx)(o.I,{id:"location",name:"location",value:_.location,onChange:handleInputChange,placeholder:"e.g., London, UK",className:P})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"field_of_study",className:F,children:"Primary Field of Study"}),(0,r.jsx)(o.I,{id:"field_of_study",name:"field_of_study",value:_.field_of_study,onChange:handleInputChange,placeholder:"e.g., Computational Linguistics",className:P})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"website",className:F,children:"Website/Portfolio"}),(0,r.jsx)(o.I,{id:"website",name:"website",type:"url",value:_.website,onChange:handleInputChange,placeholder:"https://your.personal.page",className:P})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"availability",className:F,children:"Availability for Collaboration"}),(0,r.jsxs)("select",{id:"availability",name:"availability",value:_.availability,onChange:handleInputChange,className:"w-full mt-1 block rounded-lg border bg-white/5 backdrop-blur-sm px-4 py-2.5 text-sm text-gray-100 placeholder:text-gray-400 caret-purple-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500 focus-visible:border-transparent disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 ease-in-out border-white/20 hover:border-white/40 h-11",children:[(0,r.jsx)("option",{value:"full-time",className:"bg-gray-800 text-white",children:"Full Time"}),(0,r.jsx)("option",{value:"part-time",className:"bg-gray-800 text-white",children:"Part Time"}),(0,r.jsx)("option",{value:"weekends",className:"bg-gray-800 text-white",children:"Weekends Only"}),(0,r.jsx)("option",{value:"not-available",className:"bg-gray-800 text-white",children:"Not Currently Available"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:F,children:"Skills (Tags)"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2 min-h-[2.5rem]",children:(_.skills||[]).map(e=>(0,r.jsxs)("span",{className:R,children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>handleSkillRemove(e),className:z,"aria-label":"Remove ".concat(e),children:(0,r.jsx)(u.q5L,{size:14})})]},e))}),(0,r.jsx)(o.I,{placeholder:"Add a skill and press Enter",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target;t.value.trim()&&(handleSkillAdd(t.value.trim()),t.value="")}},className:P}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Clearly list your key skills (e.g., Python, Data Analysis, Grant Writing)."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:F,children:"Research Interests (Tags)"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-2 min-h-[2.5rem]",children:(_.research_interests||[]).map(e=>(0,r.jsxs)("span",{className:R,children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>handleInterestRemove(e),className:z,"aria-label":"Remove ".concat(e),children:(0,r.jsx)(u.q5L,{size:14})})]},e))}),(0,r.jsx)(o.I,{placeholder:"Add an interest and press Enter",onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=e.target;t.value.trim()&&(handleInterestAdd(t.value.trim()),t.value="")}},className:P}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Add relevant keywords or phrases for your research."})]}),(0,r.jsx)("div",{className:"pt-4",children:(0,r.jsx)(n.z,{type:"submit",variant:"primary",size:"lg",isLoading:x,isFullWidth:!0,leftIcon:(0,r.jsx)(u.mW3,{size:18}),className:"transform hover:scale-105 active:scale-95",children:"Save Changes"})})]})}},1767:function(e,t,l){"use strict";l.d(t,{q:function(){return Avatar}});var r=l(7437);l(2265);var a=l(6691),i=l.n(a),s=l(1628);function Avatar(e){let{src:t,alt:l,size:a="md",fallback:n,className:o,priority:d=!1}=e,{dimension:c,textClass:u}={sm:{dimension:32,textClass:"text-sm"},md:{dimension:40,textClass:"text-base"},lg:{dimension:64,textClass:"text-xl"},xl:{dimension:128,textClass:"text-3xl"}}[a];return t?(0,r.jsx)("div",{className:(0,s.cn)("relative rounded-full overflow-hidden","w-".concat(c/4," h-").concat(c/4),"min-w-[".concat(c,"px] min-h-[").concat(c,"px] w-[").concat(c,"px] h-[").concat(c,"px]"),o),style:{width:c,height:c},children:(0,r.jsx)(i(),{src:t,alt:l,width:c,height:c,className:"object-cover",priority:d})}):(0,r.jsx)("div",{className:(0,s.cn)("flex items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700","w-".concat(c/4," h-").concat(c/4),"min-w-[".concat(c,"px] min-h-[").concat(c,"px] w-[").concat(c,"px] h-[").concat(c,"px]"),o),style:{width:c,height:c},children:(0,r.jsx)("span",{className:(0,s.cn)("font-semibold text-gray-500 dark:text-gray-400",u),children:n||l.charAt(0).toUpperCase()})})}},2247:function(e,t,l){"use strict";l.d(t,{z:function(){return n}});var r=l(7437),a=l(2265),i=l(9654),s=l(794);let n=a.forwardRef((e,t)=>{let{children:l,className:a,variant:n="primary",size:o="md",isLoading:d=!1,isFullWidth:c=!1,leftIcon:u,rightIcon:h,disabled:m,...b}=e;return(0,r.jsxs)("button",{ref:t,className:(0,i.m6)((0,s.W)("inline-flex items-center justify-center rounded-lg font-semibold tracking-wide transition-all duration-300 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent disabled:opacity-60 disabled:pointer-events-none",{primary:"bg-gradient-to-r from-purple-600 to-pink-500 text-white hover:from-purple-700 hover:to-pink-600 shadow-lg hover:shadow-xl focus-visible:ring-purple-500",secondary:"bg-gray-700/50 text-gray-100 hover:bg-gray-600/70 backdrop-blur-sm border border-gray-600/80 focus-visible:ring-gray-400",accent:"bg-gradient-to-r from-researchbee-yellow to-orange-500 text-black hover:from-researchbee-yellow-dark hover:to-orange-600 shadow-md hover:shadow-lg focus-visible:ring-researchbee-yellow",outline:"border border-white/30 bg-white/5 text-gray-100 backdrop-blur-sm hover:bg-white/10 hover:border-white/50 hover:text-white focus-visible:ring-white/70",ghost:"bg-transparent text-gray-200 hover:bg-white/10 hover:text-white focus-visible:ring-gray-400",danger:"bg-red-500/70 border border-red-500/90 text-white backdrop-blur-sm hover:bg-red-600/80 hover:border-red-600 focus-visible:ring-red-400",glass:"bg-white/10 backdrop-blur-md border border-white/20 text-white hover:bg-white/20 hover:border-white/30 shadow-lg focus-visible:ring-white/50"}[n],{sm:"px-3.5 py-2 text-xs h-9",md:"px-5 py-2.5 text-sm h-10",lg:"px-6 py-3 text-base h-12"}[o],c?"w-full":"",d?"opacity-75 cursor-not-allowed":"",a)),disabled:m||d,...b,children:[d&&(0,r.jsxs)("svg",{className:"animate-spin -ml-0.5 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!d&&u&&(0,r.jsx)("span",{className:l?"mr-2":"",children:u}),l,!d&&h&&(0,r.jsx)("span",{className:l?"ml-2":"",children:h})]})});n.displayName="Button"},1844:function(e,t,l){"use strict";l.d(t,{Ol:function(){return CardHeader},SZ:function(){return CardDescription},Zb:function(){return Card},aY:function(){return CardContent},eW:function(){return CardFooter},ll:function(){return CardTitle}});var r=l(7437);l(2265);var a=l(9654);let Card=e=>{let{children:t,className:l,hoverEffect:i=!1,as:s="div"}=e;return(0,r.jsx)(s,{className:(0,a.m6)("rounded-xl bg-black/20 backdrop-blur-lg border border-white/10 shadow-2xl","p-6",i&&"transition-all duration-300 hover:shadow-purple-500/30 hover:border-white/20 hover:bg-black/30",l),children:t})},CardHeader=e=>{let{children:t,className:l}=e;return(0,r.jsx)("div",{className:(0,a.m6)("pb-4 mb-4 border-b border-white/10",l),children:t})},CardTitle=e=>{let{children:t,className:l}=e;return(0,r.jsx)("h3",{className:(0,a.m6)("text-xl lg:text-2xl font-semibold text-white",l),children:t})},CardDescription=e=>{let{children:t,className:l}=e;return(0,r.jsx)("p",{className:(0,a.m6)("text-sm text-gray-300 leading-relaxed",l),children:t})},CardContent=e=>{let{children:t,className:l}=e;return(0,r.jsx)("div",{className:(0,a.m6)("",l),children:t})},CardFooter=e=>{let{children:t,className:l}=e;return(0,r.jsx)("div",{className:(0,a.m6)("pt-4 mt-4 border-t border-white/10 flex items-center",l),children:t})}},4977:function(e,t,l){"use strict";l.d(t,{I:function(){return s}});var r=l(7437),a=l(2265),i=l(1628);let s=(0,a.forwardRef)((e,t)=>{let{className:l,type:a,...s}=e,n=(0,i.cn)("flex w-full rounded-lg border bg-white/5 backdrop-blur-sm px-4 py-2.5 text-sm text-gray-100 ","placeholder:text-gray-400 caret-purple-400 ","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500 focus-visible:border-transparent ","disabled:cursor-not-allowed disabled:opacity-50 ","transition-all duration-200 ease-in-out ",e.error?"border-red-500/70 focus-visible:ring-red-500":"border-white/20 hover:border-white/40",l);return"textarea"===a?(0,r.jsx)("textarea",{className:(0,i.cn)(n,"h-auto min-h-[100px]"),ref:t,...s}):(0,r.jsx)("input",{type:a||"text",className:(0,i.cn)(n,"h-11"),ref:t,...s})});s.displayName="Input"},2445:function(e,t,l){"use strict";l.d(t,{Wq:function(){return getBrowserClient}});var r=l(4683);let SupabaseError=class SupabaseError extends Error{constructor(e,t=400,l){super(e),this.name="SupabaseError",this.status=t,this.code=l}};let a="https://yltnvmypasnfdgtnyhwg.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw";a&&i||console.error("Missing Supabase environment variables");let s=null;function getBrowserClient(){return s||(s=function(){if(!a||!i)throw new SupabaseError("Missing Supabase environment variables",500);return(0,r.eI)(a,i,{auth:{persistSession:!0,autoRefreshToken:!0}})}())}},1628:function(e,t,l){"use strict";l.d(t,{cn:function(){return cn}});var r=l(794),a=l(9654);function cn(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,a.m6)((0,r.W)(t))}},3574:function(e,t){"use strict";function NoopHead(){return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return NoopHead}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6304:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return i}});let r=l(7675),a=r._(l(2265)),i=a.default.createContext(null)},4033:function(e,t,l){e.exports=l(94)}}]);