exports.id=505,exports.ids=[505],exports.modules={18036:(e,t,r)=>{Promise.resolve().then(r.bind(r,62317))},57981:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13724,23)),Promise.resolve().then(r.t.bind(r,35365,23)),Promise.resolve().then(r.t.bind(r,44900,23)),Promise.resolve().then(r.t.bind(r,44714,23)),Promise.resolve().then(r.t.bind(r,45392,23)),Promise.resolve().then(r.t.bind(r,8898,23))},53677:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,30614,23))},62317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthProvider:()=>AuthProvider});var a=r(30784),s=r(9885),i=r(6568),n=r(66262),o=r(54049);function AuthProvider({children:e}){let{setUser:t,setProfile:r,setLoading:l}=(0,n.tN)(),d=(0,i.Wq)();return(0,s.useEffect)(()=>{l(!0);let{data:e}=d.auth.onAuthStateChange(async(e,a)=>{let s=a?.user??null;if(t(s),s)try{let e=await (0,o.Ai)(s.id);r(e)}catch(e){console.error("Error fetching profile in AuthProvider:",e),r(null)}else r(null);l(!1)}),checkInitialSession=async()=>{let{data:{session:e}}=await d.auth.getSession(),a=e?.user??null;if(t(a),a)try{let e=await (0,o.Ai)(a.id);r(e)}catch(e){console.error("Error fetching profile on initial check:",e),r(null)}else r(null);l(!1)};return checkInitialSession(),()=>{e.subscription?.unsubscribe()}},[d,t,r,l]),a.jsx(a.Fragment,{children:e})}},54049:(e,t,r)=>{"use strict";r.d(t,{Hu:()=>getMessagesForMatch,Ai:()=>getProfile,xE:()=>getResearchPostById,sk:()=>markMessagesAsRead,bG:()=>sendMessage,Vp:()=>setupMessageListener,gg:()=>uploadAvatar});var a=r(83296),s=r(92667);(0,s.createClient)((()=>{let e="https://yltnvmypasnfdgtnyhwg.supabase.co";if(!e)throw Error("Missing Supabase URL");return e})(),(()=>{let e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw";if(!e)throw Error("Missing Supabase key");return e})());let i=a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid().optional(),updated_at:a.z.date().optional().nullable(),first_name:a.z.string().min(1,"First name is required").max(255).optional().nullable(),last_name:a.z.string().min(1,"Last name is required").max(255).optional().nullable(),email:a.z.string().email().optional().nullable(),avatar_url:a.z.string().url().optional().nullable(),institution:a.z.string().max(255).optional().nullable(),bio:a.z.string().max(2e3).optional().nullable(),website:a.z.string().url().optional().nullable(),skills:a.z.array(a.z.string()).optional().nullable(),interests:a.z.array(a.z.string()).optional().nullable(),collaboration_pitch:a.z.string().max(1e3,"Collaboration pitch must be 1000 characters or less.").optional().nullable(),location:a.z.string().max(255).optional().nullable(),field_of_study:a.z.string().max(255).optional().nullable(),availability:a.z.enum(["full-time","part-time","weekends","not-available"]).optional().nullable()});a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),updated_at:a.z.string().datetime().optional(),title:a.z.string().min(5).max(100),content:a.z.string().min(20),user_id:a.z.string().uuid(),tags:a.z.array(a.z.string()).optional(),visibility:a.z.enum(["public","private","connections"]).default("public"),is_boosted:a.z.boolean().default(!1),boost_end_date:a.z.string().datetime().optional().nullable(),engagement_count:a.z.number().int().default(0)}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),user_id_1:a.z.string().uuid(),user_id_2:a.z.string().uuid(),status:a.z.enum(["pending","matched","rejected"]).default("pending")}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),name:a.z.string().min(3).max(50),description:a.z.string().max(500).optional(),creator_id:a.z.string().uuid(),logo_url:a.z.string().url().optional().nullable(),activity_score:a.z.number().int().default(0),member_count:a.z.number().int().default(1)}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),updated_at:a.z.string().datetime().optional(),title:a.z.string().min(5).max(100),content:a.z.string().min(20),user_id:a.z.string().uuid(),tags:a.z.array(a.z.string()).optional().nullable(),visibility:a.z.enum(["public","private","connections"]).default("public"),is_boosted:a.z.boolean().default(!1),engagement_count:a.z.number().int().default(0)}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),user_id:a.z.string().uuid(),project_idea:a.z.string().min(20),field:a.z.string(),status:a.z.enum(["pending","matched","rejected"]).default("pending"),matched_mentor_id:a.z.string().uuid().optional().nullable()}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),user_id:a.z.string().uuid(),project_id:a.z.string().uuid(),content_hash:a.z.string(),timestamp:a.z.string().datetime(),blockchain_tx:a.z.string().optional().nullable()});let n=a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),sender_id:a.z.string().uuid(),receiver_id:a.z.string().uuid(),match_id:a.z.string().uuid(),content:a.z.string(),is_read:a.z.boolean().default(!1)});a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),user_id:a.z.string().uuid(),original_text:a.z.string(),review_content:a.z.string(),suggested_edits:a.z.string().optional(),suggested_citations:a.z.array(a.z.string()).optional(),quality_score:a.z.number().min(0).max(100).optional()}),a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime().optional(),user_id:a.z.string().uuid(),stripe_customer_id:a.z.string(),stripe_subscription_id:a.z.string(),status:a.z.enum(["active","canceled","past_due","trialing"]).default("trialing"),plan_type:a.z.enum(["free","premium"]).default("free"),current_period_end:a.z.string().datetime()}),a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),research_post_id:a.z.string().uuid(),status:a.z.enum(["interested","matched","dismissed","saved"]).default("interested"),created_at:a.z.string().datetime().optional(),updated_at:a.z.string().datetime().optional()}),a.z.object({id:a.z.string().uuid(),user_id:a.z.string().uuid(),type:a.z.enum(["new_match_suggestion","new_direct_match","new_message","project_update","mention","general_alert","feedback_request"]),content:a.z.string().max(500),is_read:a.z.boolean().default(!1),link_to:a.z.string().optional().nullable(),sender_id:a.z.string().uuid().optional().nullable(),created_at:a.z.string().datetime().optional()}),a.z.object({id:a.z.string().uuid(),research_post_id:a.z.string().uuid(),uploader_id:a.z.string().uuid(),file_name:a.z.string().min(1).max(255),file_path:a.z.string(),file_type:a.z.string(),file_size:a.z.number().int().positive(),description:a.z.string().max(500).optional().nullable(),created_at:a.z.string().datetime().optional(),updated_at:a.z.string().datetime().optional()}),a.z.object({id:a.z.string().uuid(),matcher_user_id:a.z.string().uuid({message:"Matcher user ID must be a valid UUID."}),matchee_user_id:a.z.string().uuid({message:"Matchee user ID must be a valid UUID."}),status:a.z.enum(["matched","rejected"],{message:"Status must be either 'matched' or 'rejected'."}),created_at:a.z.date().optional()});let SupabaseError=class SupabaseError extends Error{constructor(e,t=400,r){super(e),this.name="SupabaseError",this.status=t,this.code=r}};let o="https://yltnvmypasnfdgtnyhwg.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw",d=null;function getBrowserClient(){return d||(d=function(){if(!o||!l)throw new SupabaseError("Missing Supabase environment variables for client",500);return(0,s.createClient)(o,l,{auth:{persistSession:!0,autoRefreshToken:!0}})}())}let getProfile=async e=>{let t=getBrowserClient();try{let{data:r,error:a}=await t.from("profiles").select("*").eq("id",e).single();if(a){if("PGRST116"===a.code)return null;throw new SupabaseError(`Error fetching profile: ${a.message}`,a.code?parseInt(a.code):500,a.code)}return i.parse(r)}catch(e){if(console.error("Error in getProfile:",e),e instanceof SupabaseError)throw e;if(e instanceof a.z.ZodError)throw new SupabaseError(`Profile data validation failed: ${e.errors.map(e=>e.message).join(", ")}`,400);throw new SupabaseError(e.message||"Failed to get profile",e?.status||500)}},getMessagesForMatch=async e=>{let t=getBrowserClient();try{let{data:r,error:a}=await t.from("messages").select(`
        *,
        profiles:sender_id (
          first_name,
          last_name,
          avatar_url
        )
      `).eq("match_id",e).order("created_at",{ascending:!0});if(a)throw new SupabaseError(`Error fetching messages: ${a.message}`,a.code?parseInt(a.code):500,a.code);return(r||[]).map(e=>n.parse(e))}catch(e){if(console.error("Error in getMessagesForMatch:",e),e instanceof SupabaseError)throw e;if(e instanceof a.z.ZodError)throw new SupabaseError(`Message data validation failed: ${e.errors.map(e=>e.message).join(", ")}`,400);throw new SupabaseError(e.message||"Failed to get messages",e?.status||500)}},sendMessage=async e=>{let t=getBrowserClient(),r=n.omit({id:!0,created_at:!0,is_read:!0}).parse(e);try{let{data:e,error:a}=await t.from("messages").insert(r).select("*").single();if(a)throw new SupabaseError(`Error sending message: ${a.message}`,a.code?parseInt(a.code):500,a.code);if(!e)throw new SupabaseError("No data returned after sending message",500);return n.parse(e)}catch(e){if(console.error("Error in sendMessage:",e),e instanceof SupabaseError)throw e;if(e instanceof a.z.ZodError)throw new SupabaseError(`Send message data validation failed: ${e.errors.map(e=>e.message).join(", ")}`,400);throw new SupabaseError(e.message||"Failed to send message",e?.status||500)}},setupMessageListener=(e,t)=>{let r=getBrowserClient(),s=r.channel(`messages-match-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`match_id=eq.${e}`},e=>{console.log("New message received via listener:",e);try{let r=n.parse(e.new);t(r)}catch(e){console.error("Error parsing new message from listener:",e),e instanceof a.z.ZodError&&console.error("Zod validation errors:",e.errors)}}).subscribe((t,r)=>{r&&console.error(`Error subscribing to messages for match ${e}:`,r)});return()=>{s&&r.removeChannel(s)}},uploadAvatar=async(e,t)=>{if(!t)return null;let r=t.name.split(".").pop(),a=`${e}-${Date.now()}.${r}`,s=getBrowserClient();try{let{data:e,error:r}=await s.storage.from("avatars").upload(a,t,{cacheControl:"3600",upsert:!1});if(r)throw new SupabaseError(`Avatar upload failed: ${r.message}`,r?.statusCode||500);if(!e||!e.path)throw new SupabaseError("Avatar upload failed to return a path.",500);let{data:i}=s.storage.from("avatars").getPublicUrl(e.path);return{path:e.path,url:i.publicUrl}}catch(e){if(console.error("Error uploading avatar in API wrapper:",e),e instanceof SupabaseError)throw e;throw new SupabaseError(e.message||"Failed to upload avatar",e?.status||500)}},u=a.z.object({id:a.z.string().uuid(),file_name:a.z.string(),file_path:a.z.string(),file_type:a.z.string(),file_size:a.z.number().int(),description:a.z.string().nullable().optional(),created_at:a.z.string().datetime()}),c=a.z.object({id:a.z.string().uuid(),created_at:a.z.string().datetime(),title:a.z.string(),content:a.z.string(),user_id:a.z.string().uuid(),tags:a.z.array(a.z.string()).nullable().optional(),visibility:a.z.enum(["public","private","connections"]),is_boosted:a.z.boolean().nullable().optional(),engagement_count:a.z.number().int().nullable().optional(),profiles:i.pick({first_name:!0,last_name:!0,avatar_url:!0,institution:!0,id:!0}).nullable(),project_files:a.z.array(u).optional()}),getResearchPostById=async e=>{let t=getBrowserClient();try{let{data:r,error:a}=await t.from("research_posts").select(`
        *,
        profiles (
          id,
          first_name,
          last_name,
          avatar_url,
          institution
        )
      `).eq("id",e).single();if(a){if("PGRST116"===a.code)return null;throw new SupabaseError(`Error fetching research post: ${a.message}`,a.code?parseInt(a.code):500,a.code)}if(!r)return null;let{data:s,error:i}=await t.from("project_files").select("*").eq("research_post_id",e);i&&console.error(`Error fetching files for post ${e}:`,i);let n={...r,project_files:s||[]};return c.parse(n)}catch(t){if(console.error(`Error in getResearchPostById for post ${e}:`,t),t instanceof SupabaseError)throw t;if(t instanceof a.z.ZodError)throw new SupabaseError(`Research post data validation failed: ${t.errors.map(e=>e.message).join(", ")}`,400,"ZOD_VALIDATION_ERROR");throw new SupabaseError(t.message||"Failed to get research post",t?.status||500)}};a.z.object({matchId:a.z.string().uuid(),otherUserId:a.z.string().uuid(),otherUserFirstName:a.z.string().nullable().optional(),otherUserLastName:a.z.string().nullable().optional(),otherUserAvatarUrl:a.z.string().url().nullable().optional(),lastMessageContent:a.z.string().nullable().optional(),lastMessageSenderId:a.z.string().uuid().nullable().optional(),lastMessageCreatedAt:a.z.string().datetime().nullable().optional(),unreadCount:a.z.number().int().default(0)});let markMessagesAsRead=async(e,t)=>{let r=getBrowserClient();try{let{error:a}=await r.from("messages").update({is_read:!0,updated_at:new Date().toISOString()}).eq("match_id",e).eq("receiver_id",t).eq("is_read",!1);if(a)throw new SupabaseError(`Error marking messages as read: ${a.message}`,500,a.code)}catch(e){if(console.error("Error in markMessagesAsRead:",e),e instanceof SupabaseError)throw e;throw new SupabaseError(e.message||"Failed to mark messages as read",e?.status||500)}}},66262:(e,t,r)=>{"use strict";r.d(t,{aK:()=>i,tN:()=>s});var a=r(41679);let s=(0,a.Ue)(e=>({user:null,profile:null,isLoading:!0,setUser:t=>e({user:t}),setProfile:t=>e({profile:t}),setLoading:t=>e({isLoading:t}),signOut:()=>e({user:null,profile:null,isLoading:!1}),clearAuth:()=>e({user:null,profile:null,isLoading:!1})}));(0,a.Ue)(e=>({swipedUsers:[],likedUsers:[],matches:[],addSwipedUser:t=>e(e=>({swipedUsers:[...e.swipedUsers,t]})),addLikedUser:t=>e(e=>({likedUsers:[...e.likedUsers,t]})),setMatches:t=>e({matches:t}),addMatch:t=>e(e=>({matches:[...e.matches,t]})),resetSwipeState:()=>e({swipedUsers:[],likedUsers:[],matches:[]})}));let i=(0,a.Ue)((e,t)=>({currentChatUserId:null,unreadMessages:{},totalUnreadMessages:0,setCurrentChatUserId:t=>e({currentChatUserId:t}),setUnreadCount:(r,a)=>{let s=t().unreadMessages[r]||0,i=t().totalUnreadMessages-s+a;e(e=>({unreadMessages:{...e.unreadMessages,[r]:a},totalUnreadMessages:Math.max(0,i)}))},incrementUnreadCount:t=>{e(e=>({unreadMessages:{...e.unreadMessages,[t]:(e.unreadMessages[t]||0)+1},totalUnreadMessages:e.totalUnreadMessages+1}))},resetUnreadCount:r=>{let a=t().unreadMessages[r]||0;e(e=>({unreadMessages:{...e.unreadMessages,[r]:0},totalUnreadMessages:Math.max(0,e.totalUnreadMessages-a)}))},setTotalUnreadMessages:t=>e({totalUnreadMessages:t})}));(0,a.Ue)(e=>({sidebarOpen:!1,darkMode:!1,toggleSidebar:()=>e(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarOpen:t=>e({sidebarOpen:t}),toggleDarkMode:()=>e(e=>({darkMode:!e.darkMode})),setDarkMode:t=>e({darkMode:t})})),(0,a.Ue)(e=>({posts:[],isLoading:!1,hasMore:!0,setPosts:t=>e({posts:t}),appendPosts:t=>e(e=>({posts:[...e.posts,...t]})),setLoading:t=>e({isLoading:t}),setHasMore:t=>e({hasMore:t}),resetPosts:()=>e({posts:[],isLoading:!1,hasMore:!0})}))},6568:(e,t,r)=>{"use strict";r.d(t,{Wq:()=>getBrowserClient});var a=r(92667);let SupabaseError=class SupabaseError extends Error{constructor(e,t=400,r){super(e),this.name="SupabaseError",this.status=t,this.code=r}};let s="https://yltnvmypasnfdgtnyhwg.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlsdG52bXlwYXNuZmRndG55aHdnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQzNDcxNTMsImV4cCI6MjA1OTkyMzE1M30.ajCPb95af8_It1m_D4yGJhErKuLEtqqfqk8Yq2n4MCw",n=null;function getBrowserClient(){return n||(n=function(){if(!s||!i)throw new SupabaseError("Missing Supabase environment variables",500);return(0,a.createClient)(s,i,{auth:{persistSession:!0,autoRefreshToken:!0}})}())}},44599:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>RootLayout,metadata:()=>d});var a=r(4656);r(67272);var s=r(95153);let i=(0,s.createProxy)(String.raw`/Users/shreyansh/ItsMightHappenApp/apps/web/components/providers/auth-provider.tsx`),{__esModule:n,$$typeof:o}=i;i.default;let l=i.AuthProvider,d={title:"Research Bee - Research Collaboration Platform",description:"Connect with fellow researchers, find collaborators for your projects, join research guilds, and more."};function RootLayout({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:a.jsx(l,{children:e})})})}},44293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>NotFoundPage});var a=r(4656);r(3542);var s=r(24353),i=r.n(s);function NotFoundPage(){return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404 - Page Not Found"}),a.jsx("p",{className:"mb-6",children:"The page you're looking for doesn't exist."}),a.jsx(i(),{href:"/",className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Go back home"})]})}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=r(31323);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,a.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}},67272:()=>{}};