(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},84839:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=t(67096),a=t(16132),i=t(37284),l=t.n(i),o=t(32564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(s,n);let c=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1618)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/dashboard/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,44599)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/shreyansh/ItsMightHappenApp/apps/web/app/dashboard/page.tsx"],h="/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},66030:(e,s,t)=>{Promise.resolve().then(t.bind(t,36052))},36052:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>DashboardPage});var r=t(30784),a=t(9885),i=t(57114),l=t(6568),o=t(66262),n=t(71298),c=t.n(n);function PageContainer({title:e,children:s,className:t}){return(0,r.jsxs)(r.Fragment,{children:[r.jsx(c(),{children:r.jsx("title",{children:`${e} | ResearchCollab`})}),r.jsx("main",{className:`container mx-auto px-4 py-8 ${t||""}`,children:s})]})}var d=t(85217),h=t(95105),m=t(11440),x=t.n(m);let u=[{id:"overview",label:"Overview",icon:h.aCJ},{id:"projects",label:"My Posts",icon:h.QoU},{id:"matches",label:"My Matches",icon:h.WY8},{id:"messages",label:"Messages",icon:h.IC0},{id:"discover",label:"Discover",icon:h.jRj},{id:"notifications",label:"Notifications",icon:h.vWP},{id:"settings",label:"Settings",icon:h.nbt}];function DashboardPage(){let e=(0,i.useRouter)(),s=(0,l.Wq)(),{user:t,isLoading:n,profile:c,clearAuth:m}=(0,o.tN)(),[p,b]=(0,a.useState)(!0),[g,f]=(0,a.useState)(""),[j,v]=(0,a.useState)("overview"),[w,y]=(0,a.useState)([]),[N,_]=(0,a.useState)([]),[C,P]=(0,a.useState)([]),[k,q]=(0,a.useState)(0),handleLogout=async()=>{await s.auth.signOut(),m(),e.push("/login")};(0,a.useEffect)(()=>{c?f(`${c.first_name||""} ${c.last_name||""}`.trim()||c.email?.split("@")[0]||"Researcher"):t&&!c&&f(t.email?.split("@")[0]||"Researcher")},[t,c]),(0,a.useEffect)(()=>{async function loadDashboardData(){if(!t){e.push("/login");return}b(!0);try{let{data:e,error:r}=await s.from("profiles").select("first_name, last_name, email, avatar_url").eq("id",t.id).single();r&&"PGRST116"!==r.code?console.error("Error fetching profile for dashboard:",r):e&&f(`${e.first_name||""} ${e.last_name||""}`.trim()||e.email?.split("@")[0]||"Researcher");let{data:a,error:i}=await s.from("research_posts").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});i?console.error("Error fetching research posts:",i):y((a||[]).map(e=>({...e,visibility:e.visibility})));let{data:l,error:o}=await s.from("matches").select(`
            *,
            profile_1:profiles!matches_user_id_1_fkey(id, first_name, last_name, avatar_url, title, institution),
            profile_2:profiles!matches_user_id_2_fkey(id, first_name, last_name, avatar_url, title, institution)
          `).or(`user_id_1.eq.${t.id},user_id_2.eq.${t.id}`).order("created_at",{ascending:!1});if(o)console.error("Error fetching matches:",o),_([]);else{let e=(l||[]).map(e=>{let s=null;return e.user_id_1===t.id&&e.profile_2?s=e.profile_2:e.user_id_2===t.id&&e.profile_1&&(s=e.profile_1),{...e,matched_profile:s,profile_1:void 0,profile_2:void 0}});_(e)}let{data:n,error:c}=await s.from("messages").select("* ").or(`sender_id.eq.${t.id},receiver_id.eq.${t.id}`).order("created_at",{ascending:!1}).limit(10);c?console.error("Error fetching messages:",c):P(n||[]);let{count:d,error:h}=await s.from("user_notifications").select("* ",{count:"exact",head:!0}).eq("user_id",t.id).eq("is_read",!1);h?console.error("Error fetching notifications count:",h):q(d||0)}catch(e){console.error("Error loading dashboard data:",e)}finally{b(!1)}}t?loadDashboardData():n||e.push("/login")},[t,n,s,e]);let M=getTimeBasedGreeting();return p||n?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-researchbee-yellow border-t-transparent"})}):r.jsx(PageContainer,{title:"Dashboard",className:"!p-0 !max-w-full bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 min-h-screen text-white",children:(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[(0,r.jsxs)("aside",{className:"w-72 bg-black/30 backdrop-blur-xl p-6 space-y-6 border-r border-white/10 flex flex-col shadow-2xl",children:[r.jsx("div",{className:"text-center py-4",children:r.jsx(x(),{href:"/dashboard",className:"text-3xl font-bold text-researchbee-yellow tracking-tight",children:"RESEARCH-BEE"})}),r.jsx("nav",{className:"flex-grow",children:r.jsx("ul",{className:"space-y-2",children:u.map(e=>r.jsx("li",{children:(0,r.jsxs)("button",{onClick:()=>v(e.id),className:`w-full text-left px-4 py-3 rounded-lg flex items-center transition-all duration-200 ease-in-out group hover:bg-researchbee-yellow/20 focus:outline-none focus:bg-researchbee-yellow/30 
                      ${j===e.id?"bg-researchbee-yellow text-black shadow-lg scale-105":"text-gray-300 hover:text-white"}
                    `,children:[r.jsx(e.icon,{className:`mr-3 h-5 w-5 transition-transform duration-200 ease-in-out group-hover:scale-110 ${j===e.id?"text-black":"text-researchbee-yellow/80"}`}),e.label,"notifications"===e.id&&k>0&&r.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs font-semibold px-2 py-0.5 rounded-full",children:k})]})},e.id))})}),r.jsx("div",{className:"mt-auto",children:(0,r.jsxs)("button",{onClick:handleLogout,className:"w-full text-left px-4 py-3 rounded-lg flex items-center text-gray-400 hover:bg-red-500/20 hover:text-red-400 transition-all duration-200 ease-in-out group focus:outline-none",children:[r.jsx(h.xqh,{className:"mr-3 h-5 w-5 transition-transform duration-200 ease-in-out group-hover:scale-110"}),"Logout"]})})]}),(0,r.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto bg-black/10 backdrop-blur-md",children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-4xl font-bold",children:[M,", ",g||"Researcher","!"]}),r.jsx("p",{className:"text-gray-400 mt-1",children:"Here's your research hub."})]}),"overview"===j&&r.jsx(DashboardOverview,{userName:g,researchPostsCount:w.length,matchesCount:N.length,messagesCount:C.length,onCreateProject:()=>e.push("/projects/new")}),"projects"===j&&(0,r.jsxs)("section",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-3xl font-semibold",children:"My Research Posts"}),(0,r.jsxs)(d.z,{onClick:()=>e.push("/projects/new"),variant:"primary",size:"lg",children:[r.jsx(h.OvN,{className:"mr-2"})," Create New Post"]})]}),0===w.length?(0,r.jsxs)("div",{className:"text-center py-16 bg-white/5 backdrop-blur-sm rounded-xl shadow-lg border border-white/10",children:[r.jsx(h.QoU,{size:48,className:"mx-auto mb-4 text-researchbee-yellow/70"}),r.jsx("h3",{className:"text-xl font-medium mb-2",children:"No research posts yet."}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Share your ideas and start collaborating!"}),r.jsx(d.z,{onClick:()=>e.push("/projects/new"),variant:"secondary",size:"lg",children:"Create Your First Post"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:w.map(e=>r.jsx(ResearchPostCard,{post:e},e.id))})]}),"matches"===j&&(0,r.jsxs)("section",{children:[r.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"My Matches"}),0===N.length?(0,r.jsxs)("div",{className:"text-center py-16 bg-white/5 backdrop-blur-sm rounded-xl shadow-lg border border-white/10",children:[r.jsx(h.WY8,{size:48,className:"mx-auto mb-4 text-researchbee-yellow/70"}),r.jsx("p",{className:"text-gray-400",children:"No matches yet. Explore projects or update your profile to find matches!"}),r.jsx(d.z,{onClick:()=>v("discover"),variant:"secondary",size:"lg",className:"mt-6",children:"Discover Projects"})]}):r.jsx("div",{className:"space-y-4",children:N.map(e=>r.jsx(MatchCard,{match:e,currentUserId:t.id},e.id))})]}),"messages"===j&&(0,r.jsxs)("section",{children:[r.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"Messages"}),0===C.length?(0,r.jsxs)("div",{className:"text-center py-16 bg-white/5 backdrop-blur-sm rounded-xl shadow-lg border border-white/10",children:[r.jsx(h.IC0,{size:48,className:"mx-auto mb-4 text-researchbee-yellow/70"}),r.jsx("h3",{className:"text-xl font-medium mb-2",children:"No messages yet."}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Start a conversation with your matches."}),r.jsx(d.z,{onClick:()=>v("matches"),variant:"secondary",size:"lg",children:"View Matches"})]}):r.jsx("div",{className:"space-y-4",children:C.map(e=>r.jsx(MessagePreviewCard,{message:e,currentUserId:t.id},e.id))})]}),"discover"===j&&(0,r.jsxs)("section",{children:[r.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"Discover Projects & People"}),r.jsx("p",{className:"text-gray-400",children:"Discover section coming soon! Find new research posts and potential collaborators."})]}),"notifications"===j&&(0,r.jsxs)("section",{children:[r.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"Notifications"}),r.jsx("p",{className:"text-gray-400",children:"Notifications feed coming soon! Stay updated with matches, messages, and project activity."})]}),"settings"===j&&(0,r.jsxs)("section",{children:[r.jsx("h2",{className:"text-3xl font-semibold mb-6",children:"Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(SettingsCard,{title:"Profile Settings",description:"Update your personal details, interests, and visibility.",children:r.jsx(x(),{href:"/profile-setup",children:r.jsx(d.z,{variant:"outline",className:"mt-4",children:"Edit Profile"})})}),(0,r.jsxs)(SettingsCard,{title:"Account Settings",description:"Manage your login credentials and account preferences.",children:[r.jsx(d.z,{variant:"outline",className:"mt-4 mr-2",children:"Change Password"}),r.jsx(d.z,{variant:"danger",className:"mt-4",children:"Delete Account"})]}),r.jsx(SettingsCard,{title:"Notification Preferences",description:"Choose how you receive updates and alerts.",children:r.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Notification controls coming soon."})})]})]})]})]})})}let getTimeBasedGreeting=()=>{let e=new Date().getHours();return e<12?"Good Morning":e<18?"Good Afternoon":"Good Evening"},p={folder:h.QoU,users:h.WY8,message:h.IC0,star:h.nae,clock:h.TCC};function DashboardCard({title:e,count:s,icon:t,onClick:a}){let i=p[t]||h.aCJ;return(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg p-6 rounded-2xl shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 cursor-pointer active:scale-95",onClick:a,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-xl font-semibold text-white/90",children:e}),r.jsx(i,{className:"text-researchbee-yellow/90",size:32})]}),r.jsx("p",{className:"text-5xl font-bold text-white",children:s}),r.jsx("div",{className:"mt-4 h-1.5 w-full bg-researchbee-yellow/30 rounded-full overflow-hidden",children:r.jsx("div",{style:{width:`${Math.min(10*s,100)}%`},className:"h-full bg-gradient-to-r from-researchbee-yellow/70 to-researchbee-yellow rounded-full transition-all duration-700 ease-out"})})]})}function DashboardOverview({userName:e,researchPostsCount:s,matchesCount:t,messagesCount:a,onCreateProject:i}){return(0,r.jsxs)("div",{className:"animate-fade-in",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10",children:[r.jsx(DashboardCard,{title:"Active Posts",count:s,icon:"folder",onClick:()=>{}}),r.jsx(DashboardCard,{title:"New Matches",count:t,icon:"users",onClick:()=>{}}),r.jsx(DashboardCard,{title:"Unread Messages",count:a,icon:"message",onClick:()=>{}})]}),0===s&&(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm p-8 rounded-xl text-center shadow-lg border border-white/10",children:[r.jsx(h.QoU,{size:52,className:"mx-auto mb-5 text-researchbee-yellow/70"}),r.jsx("h3",{className:"text-2xl font-semibold mb-3",children:"Start Your First Research Post"}),r.jsx("p",{className:"text-gray-300 mb-6",children:"Share your ideas, find collaborators, and get feedback."}),(0,r.jsxs)(d.z,{onClick:i,variant:"primary",size:"lg",className:"transform hover:scale-105 transition-transform",children:[r.jsx(h.OvN,{className:"mr-2"})," Create New Post"]})]})]})}function ResearchPostCard({post:e}){return r.jsx(x(),{href:`/research/${e.id}`,className:"block group",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-5 shadow-lg border border-white/10 hover:border-researchbee-yellow/70 transition-all duration-300 h-full flex flex-col justify-between transform hover:scale-105 active:scale-100",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-xl font-semibold mb-2 line-clamp-2 group-hover:text-researchbee-yellow transition-colors",children:e.title}),r.jsx("p",{className:"text-sm text-gray-300 line-clamp-3 mb-3",children:e.content})]}),r.jsx("div",{className:"mt-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[r.jsx("span",{className:"capitalize px-2 py-1 bg-researchbee-yellow/10 text-researchbee-yellow rounded-full text-xs",children:e.visibility}),r.jsx("span",{children:e.updated_at?new Date(e.updated_at).toLocaleDateString():"Date N/A"})]})})]})})}function MatchCard({match:e,currentUserId:s}){let t=(0,i.useRouter)(),a=e.matched_profile;if(!a||!a.id)return null;let l=`${a.first_name||""} ${a.last_name||""}`.trim()||"User";return(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg p-5 rounded-xl shadow-lg border border-white/10 flex items-center justify-between transition-all duration-300 hover:shadow-xl transform hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("img",{src:a.avatar_url||"/images/default-avatar.png",alt:l,className:"w-14 h-14 rounded-full mr-4 border-2 border-researchbee-yellow/50 object-cover"}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:l}),r.jsx("p",{className:"text-sm text-gray-400 line-clamp-1",children:a.title||a.institution||"No details provided"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm font-medium capitalize px-3 py-1 rounded-full 
          ${"matched"===e.status?"bg-green-500/20 text-green-400":"pending"===e.status?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}
        `,children:e.status}),r.jsx(d.z,{size:"sm",variant:"secondary",onClick:()=>a.id&&t.push(`/chats?userId=${a.id}`),className:"mt-2 transform hover:scale-105",children:"Message"})]})]})}function MessagePreviewCard({message:e,currentUserId:s}){let t=e.sender_id===s?e.receiver_profile:e.sender_profile,a=t?`${t.first_name||""} ${t.last_name||""}`.trim()||"User":"Unknown User",i=t?.avatar_url||"/images/default-avatar.png";return r.jsx(x(),{href:`/chats?messageId=${e.id}`,className:"block group",children:(0,r.jsxs)("div",{className:`bg-white/10 backdrop-blur-lg p-4 rounded-xl shadow-lg border border-white/10 flex items-center justify-between transition-all duration-300 hover:shadow-xl transform hover:scale-[1.02] 
            ${e.is_read||e.receiver_id!==s?"":"border-l-4 border-l-researchbee-yellow"}
          `,children:[(0,r.jsxs)("div",{className:"flex items-center overflow-hidden",children:[r.jsx("img",{src:i,alt:a,className:"w-12 h-12 rounded-full mr-4 border-2 border-researchbee-yellow/40 object-cover"}),(0,r.jsxs)("div",{className:"overflow-hidden",children:[r.jsx("h3",{className:"text-md font-semibold text-white truncate group-hover:text-researchbee-yellow transition-colors",children:a}),r.jsx("p",{className:"text-sm text-gray-400 truncate",children:e.content})]})]}),r.jsx("div",{className:"text-xs text-gray-500 flex-shrink-0 ml-4",children:e.created_at?new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})})}function SettingsCard({title:e,description:s,children:t}){return(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg p-6 rounded-xl shadow-lg border border-white/10",children:[r.jsx("h3",{className:"text-xl font-semibold mb-2 text-white",children:e}),r.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:s}),t]})}},71298:(e,s)=>{"use strict";function NoopHead(){return null}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return NoopHead}}),("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},1618:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});var r=t(95153);let a=(0,r.createProxy)(String.raw`/Users/shreyansh/ItsMightHappenApp/apps/web/app/dashboard/page.tsx`),{__esModule:i,$$typeof:l}=a,o=a.default,n=o},11440:(e,s,t)=>{e.exports=t(30614)},57114:(e,s,t)=>{e.exports=t(4979)}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[998,450,105,781,505,217],()=>__webpack_exec__(84839));module.exports=t})();