(()=>{var e={};e.id=776,e.ids=[776],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},46287:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=s(67096),l=s(16132),i=s(37284),a=s.n(i),n=s(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let c=["",{children:["profile-setup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,99009)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/profile-setup/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,44599)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/shreyansh/ItsMightHappenApp/apps/web/app/profile-setup/page.tsx"],m="/profile-setup/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/profile-setup/page",pathname:"/profile-setup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},44968:(e,t,s)=>{Promise.resolve().then(s.bind(s,89042))},89042:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ProfileSetupPage});var r=s(30784),l=s(9885),i=s(83296),a=s(75042),n=s(11440),o=s.n(n),c=s(6568),d=s(57114),m=s(66262);let p=i.z.object({fullName:i.z.string().min(2,"Name is required"),title:i.z.string().min(2,"Professional title is required"),bio:i.z.string().min(10,"Bio should be at least 10 characters").max(500,"Bio should not exceed 500 characters"),location:i.z.string().optional(),website:i.z.string().url("Please enter a valid URL").optional().or(i.z.literal("")),skills:i.z.array(i.z.string()).min(1,"Please select at least one skill"),interests:i.z.array(i.z.string()).min(1,"Please select at least one interest"),lookingFor:i.z.array(i.z.string()).min(1,"Please select at least one option"),availabilityHours:i.z.number().min(1).max(40),projectPreference:i.z.enum(["remote","local","hybrid"]),profileVisibility:i.z.enum(["public","private"]),avatarUrl:i.z.string().optional()}),u=[{name:"Research",skills:["Data Analysis","Literature Review","Experimental Design","Survey Design","Qualitative Research","Quantitative Research"]},{name:"Technical",skills:["Web Development","Mobile App Development","Data Science","Machine Learning","UI/UX Design","Database Management"]},{name:"Academic",skills:["Academic Writing","Peer Review","Grant Writing","Teaching","Public Speaking","Statistical Analysis"]},{name:"Creative",skills:["Graphic Design","Video Production","Content Creation","Copywriting","Visual Storytelling","Social Media"]}],h=["Artificial Intelligence","Climate Change","Public Health","Education","Social Sciences","Renewable Energy","Psychology","Neuroscience","Computer Science","Economics","Business","Arts & Humanities","Engineering","Physics","Chemistry","Biology","Medicine","Environmental Science","Political Science","Law"],x=["Long-term collaboration","Short-term project","Co-authoring papers","Research assistance","Mentorship","Programming help","Data analysis","Grant writing","Peer review","Networking"];function ProfileSetupPage(){(0,d.useRouter)();let e=(0,c.Wq)(),{user:t,profile:s,setProfile:i,isLoading:n,setLoading:b}=(0,m.tN)(),[g,f]=(0,l.useState)(1),[y,j]=(0,l.useState)({fullName:"",title:"",bio:"",location:"",website:"",skills:[],interests:[],lookingFor:[],availabilityHours:10,projectPreference:"remote",profileVisibility:"public",avatarUrl:""}),[v,N]=(0,l.useState)({}),[w,k]=(0,l.useState)(!1),[P,S]=(0,l.useState)("Research"),[_,C]=(0,l.useState)(null),handleTextChange=e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:s})),v[t]&&N(e=>({...e,[t]:""}))},handleSelectChange=e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:s}))},toggleSkill=e=>{j(t=>{let s=t.skills.includes(e);return s?{...t,skills:t.skills.filter(t=>t!==e)}:{...t,skills:[...t.skills,e]}})},toggleInterest=e=>{j(t=>{let s=t.interests.includes(e);return s?{...t,interests:t.interests.filter(t=>t!==e)}:{...t,interests:[...t.interests,e]}})},toggleLookingFor=e=>{j(t=>{let s=t.lookingFor.includes(e);return s?{...t,lookingFor:t.lookingFor.filter(t=>t!==e)}:{...t,lookingFor:[...t.lookingFor,e]}})},validateCurrentStep=()=>{let e={},t=!0;switch(g){case 1:y.fullName||(e.fullName="Name is required",t=!1),y.title||(e.title="Professional title is required",t=!1),y.bio?y.bio.length<10?(e.bio="Bio should be at least 10 characters",t=!1):y.bio.length>500&&(e.bio="Bio should not exceed 500 characters",t=!1):(e.bio="Bio is required",t=!1),y.website&&!y.website.startsWith("http")&&(e.website="Please enter a valid URL",t=!1);break;case 2:0===y.skills.length&&(e.skills="Please select at least one skill",t=!1);break;case 3:0===y.interests.length&&(e.interests="Please select at least one interest",t=!1),0===y.lookingFor.length&&(e.lookingFor="Please select at least one option",t=!1);break;case 4:(y.availabilityHours<1||y.availabilityHours>40)&&(e.availabilityHours="Hours must be between 1 and 40",t=!1)}return N(e),t},handleSubmit=async()=>{try{k(!0),C(null);let t=p.safeParse(y);if(!t.success){let e={};t.error.errors.forEach(t=>{let s=t.path[0];e[s]=t.message}),N(e),k(!1);return}let{data:{user:s},error:r}=await e.auth.getUser();if(r||!s)throw Error(r?.message||"User not authenticated");console.log("Attempting to save profile for user:",s.id);let{data:l,error:i}=await e.from("profiles").select("id").eq("user_id",s.id).single();if(i&&"PGRST116"!==i.code)throw i;if(l){let t=y.fullName.split(" "),r=t[0]||"",l=t.slice(1).join(" ")||"",{data:i,error:a}=await e.from("profiles").update({first_name:r,last_name:l,title:y.title,bio:y.bio,location:y.location||null,website:y.website||null,skills:y.skills,interests:y.interests,looking_for:y.lookingFor,availability_hours:y.availabilityHours,project_preference:y.projectPreference,visibility:y.profileVisibility,avatar_url:y.avatarUrl||null,updated_at:new Date().toISOString()}).eq("user_id",s.id).select().single();if(a)throw console.error("Profile update error:",a),a;i.id}else{let t=y.fullName.split(" "),r=t[0]||"",l=t.slice(1).join(" ")||"",{data:i,error:a}=await e.from("profiles").insert({id:s.id,first_name:r,last_name:l,title:y.title,bio:y.bio,location:y.location||null,website:y.website||null,skills:y.skills,interests:y.interests,looking_for:y.lookingFor,availability_hours:y.availabilityHours,project_preference:y.projectPreference,visibility:y.profileVisibility,avatar_url:y.avatarUrl||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(a)throw console.error("Profile creation error:",a),a;i.id}let{error:a}=await e.from("onboarding_status").upsert({user_id:s.id,profile_completed:!0,updated_at:new Date().toISOString()},{onConflict:"user_id"});a&&console.error("Onboarding status update error:",a),window.location.href="/dashboard"}catch(e){console.error("Profile setup error:",e),C(e instanceof Error?e.message:"Failed to save profile. Please try again.")}finally{k(!1)}};return r.jsx(a._,{title:"Complete Your Profile",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto py-8",children:[_&&r.jsx("div",{className:"mb-4 p-4 bg-red-500 bg-opacity-20 border border-red-500 rounded-md",children:r.jsx("p",{className:"text-red-500",children:_})}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center justify-between",children:Array.from({length:4}).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${g>t+1?"bg-green-500 text-white":g===t+1?"bg-researchbee-yellow text-black":"bg-gray-700 text-gray-400"}`,children:g>t+1?"âœ“":t+1}),t<3&&r.jsx("div",{className:`h-1 w-16 mx-2 ${g>t+1?"bg-green-500":"bg-gray-700"}`})]},t))}),(0,r.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[r.jsx("span",{children:"Personal Info"}),r.jsx("span",{children:"Skills"}),r.jsx("span",{children:"Interests"}),r.jsx("span",{children:"Preferences"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Set Up Your Profile"}),1===g&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-1",children:["Full Name",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"fullName",name:"fullName",value:y.fullName,onChange:handleTextChange,className:`w-full p-3 bg-gray-700 rounded-md border ${v.fullName?"border-red-500":"border-gray-600"}`,placeholder:"Enter your full name"}),v.fullName&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.fullName})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:["Professional Title",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",name:"title",value:y.title,onChange:handleTextChange,className:`w-full p-3 bg-gray-700 rounded-md border ${v.title?"border-red-500":"border-gray-600"}`,placeholder:"e.g. Research Scientist, PhD Student, Data Analyst"}),v.title&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.title})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"bio",className:"block text-sm font-medium mb-1",children:["Bio",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"bio",name:"bio",value:y.bio,onChange:handleTextChange,rows:4,className:`w-full p-3 bg-gray-700 rounded-md border ${v.bio?"border-red-500":"border-gray-600"}`,placeholder:"Tell others about yourself, your research interests, and experience"}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-400",children:[y.bio.length,"/500 characters"]}),v.bio&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.bio})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Location"}),r.jsx("input",{type:"text",id:"location",name:"location",value:y.location,onChange:handleTextChange,className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600",placeholder:"e.g. New York, USA"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"website",className:"block text-sm font-medium mb-1",children:"Website or Portfolio"}),r.jsx("input",{type:"text",id:"website",name:"website",value:y.website,onChange:handleTextChange,className:`w-full p-3 bg-gray-700 rounded-md border ${v.website?"border-red-500":"border-gray-600"}`,placeholder:"https://yourwebsite.com"}),v.website&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.website})]})]})]}),2===g&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Skills"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Select the skills you have that would be valuable for collaboration."}),v.skills&&r.jsx("p",{className:"mb-4 text-sm text-red-500",children:v.skills}),r.jsx("div",{className:"flex mb-4 border-b border-gray-700 overflow-x-auto",children:u.map(e=>r.jsx("button",{onClick:()=>S(e.name),className:`px-4 py-2 font-medium whitespace-nowrap ${P===e.name?"border-b-2 border-researchbee-yellow text-researchbee-yellow":"text-gray-400"}`,children:e.name},e.name))}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:u.find(e=>e.name===P)?.skills.map(e=>r.jsx("div",{onClick:()=>toggleSkill(e),className:`p-3 rounded-md cursor-pointer transition-colors ${y.skills.includes(e)?"bg-researchbee-yellow text-black":"bg-gray-700 hover:bg-gray-600"}`,children:e},e))}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("h3",{className:"font-medium mb-3",children:["Selected Skills (",y.skills.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:0===y.skills.length?r.jsx("p",{className:"text-gray-400",children:"No skills selected"}):y.skills.map(e=>(0,r.jsxs)("div",{className:"bg-gray-700 rounded-full px-3 py-1 text-sm flex items-center",children:[e,r.jsx("button",{onClick:()=>toggleSkill(e),className:"ml-2 text-gray-400 hover:text-white",children:"\xd7"})]},e))})]})]}),3===g&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Interests & Goals"}),(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h3",{className:"font-medium mb-3",children:"Research Interests"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Select areas you're interested in researching or collaborating on."}),v.interests&&r.jsx("p",{className:"mb-4 text-sm text-red-500",children:v.interests}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:h.map(e=>r.jsx("div",{onClick:()=>toggleInterest(e),className:`p-3 rounded-md cursor-pointer transition-colors ${y.interests.includes(e)?"bg-researchbee-yellow text-black":"bg-gray-700 hover:bg-gray-600"}`,children:e},e))}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("h4",{className:"text-sm font-medium mb-2",children:["Selected Interests (",y.interests.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:0===y.interests.length?r.jsx("p",{className:"text-gray-400",children:"No interests selected"}):y.interests.map(e=>(0,r.jsxs)("div",{className:"bg-gray-700 rounded-full px-3 py-1 text-sm flex items-center",children:[e,r.jsx("button",{onClick:()=>toggleInterest(e),className:"ml-2 text-gray-400 hover:text-white",children:"\xd7"})]},e))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium mb-3",children:"What You're Looking For"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Select what type of collaboration you're seeking."}),v.lookingFor&&r.jsx("p",{className:"mb-4 text-sm text-red-500",children:v.lookingFor}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.map(e=>r.jsx("div",{onClick:()=>toggleLookingFor(e),className:`p-3 rounded-md cursor-pointer transition-colors ${y.lookingFor.includes(e)?"bg-researchbee-yellow text-black":"bg-gray-700 hover:bg-gray-600"}`,children:e},e))})]})]}),4===g&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Preferences"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"availabilityHours",className:"block text-sm font-medium mb-1",children:"Weekly Availability (hours)"}),r.jsx("input",{type:"number",id:"availabilityHours",name:"availabilityHours",value:y.availabilityHours,onChange:e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:parseInt(s,10)}))},min:"1",max:"40",className:`w-full p-3 bg-gray-700 rounded-md border ${v.availabilityHours?"border-red-500":"border-gray-600"}`}),r.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"How many hours per week can you dedicate to collaboration?"}),v.availabilityHours&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:v.availabilityHours})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"projectPreference",className:"block text-sm font-medium mb-1",children:"Project Location Preference"}),(0,r.jsxs)("select",{id:"projectPreference",name:"projectPreference",value:y.projectPreference,onChange:handleSelectChange,className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600",children:[r.jsx("option",{value:"remote",children:"Remote Only"}),r.jsx("option",{value:"local",children:"Local Only"}),r.jsx("option",{value:"hybrid",children:"Hybrid (Remote & Local)"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"profileVisibility",className:"block text-sm font-medium mb-1",children:"Profile Visibility"}),(0,r.jsxs)("select",{id:"profileVisibility",name:"profileVisibility",value:y.profileVisibility,onChange:handleSelectChange,className:"w-full p-3 bg-gray-700 rounded-md border border-gray-600",children:[r.jsx("option",{value:"public",children:"Public - Anyone can view your profile"}),r.jsx("option",{value:"private",children:"Private - Only matched users can view your profile"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-700 p-4 rounded-md",children:[r.jsx("h3",{className:"font-medium mb-2",children:"Profile Summary"}),(0,r.jsxs)("div",{className:"text-sm space-y-2",children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Name:"})," ",y.fullName]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Title:"})," ",y.title]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Skills:"})," ",y.skills.length," selected"]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Interests:"})," ",y.interests.length," selected"]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"text-gray-400",children:"Looking for:"})," ",y.lookingFor.length," selected"]})]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 flex justify-between",children:[r.jsx("button",{onClick:()=>{g>1&&(f(e=>e-1),window.scrollTo(0,0))},disabled:1===g,className:`px-6 py-2 rounded-md ${1===g?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-600"}`,children:"Back"}),(0,r.jsxs)("button",{onClick:()=>{validateCurrentStep()&&(g<4?(f(e=>e+1),window.scrollTo(0,0)):handleSubmit())},disabled:w,className:"bg-researchbee-yellow text-black px-6 py-2 rounded-md hover:bg-yellow-500 flex items-center",children:[w&&r.jsx("div",{className:"mr-2 h-4 w-4 border-2 border-black border-t-transparent animate-spin rounded-full"}),g<4?"Next":"Complete Profile"]})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(o(),{href:"/dashboard",className:"text-gray-400 hover:text-white text-sm",children:"Skip for now (you can complete this later)"})})]})})}},99009:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});var r=s(95153);let l=(0,r.createProxy)(String.raw`/Users/shreyansh/ItsMightHappenApp/apps/web/app/profile-setup/page.tsx`),{__esModule:i,$$typeof:a}=l,n=l.default,o=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[998,450,505,316],()=>__webpack_exec__(46287));module.exports=s})();