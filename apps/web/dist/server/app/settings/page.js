(()=>{var e={};e.id=938,e.ids=[938],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},88694:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=a(67096),r=a(16132),i=a(37284),l=a.n(i),n=a(32564),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let d=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,14011)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/settings/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,44599)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,44293)),"/Users/shreyansh/ItsMightHappenApp/apps/web/app/not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/shreyansh/ItsMightHappenApp/apps/web/app/settings/page.tsx"],u="/settings/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},41134:(e,t,a)=>{Promise.resolve().then(a.bind(a,12755))},12755:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>SettingsPage});var s=a(30784),r=a(9885),i=a(57114),l=a(85217),n=a(44662),o=a(77971),d=a(95105),c=a(66262),u=a(62233);function SettingsPage(){let e=(0,i.useRouter)(),{user:t,profile:a,setProfile:p}=(0,c.tN)(),[m,x]=(0,r.useState)({first_name:"",last_name:"",bio:"",institution:"",location:"",field_of_study:"",website:"",availability:"full-time"}),[h,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[j,_]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[P,C]=(0,r.useState)("");(0,r.useEffect)(()=>{let loadProfile=async()=>{if(!t){e.push("/login");return}try{if(v(!0),!a){let e=await (0,u.Ai)(t.id);p(e)}a&&(x({first_name:a.first_name||"",last_name:a.last_name||"",bio:a.bio||"",institution:a.institution||"",location:a.location||"",field_of_study:a.field_of_study||"",website:a.website||"",availability:a.availability||"full-time"}),a.avatar_url&&b(a.avatar_url))}catch(e){console.error("Error loading profile:",e),N(e.message||"Failed to load profile data")}finally{v(!1)}};loadProfile()},[t,a,p,e]);let handleInputChange=e=>{let{name:t,value:a}=e.target;x(e=>({...e,[t]:a}))},handleSubmit=async e=>{if(e.preventDefault(),t)try{_(!0),N(""),C("");let e=a?.avatar_url;if(h){let a=await (0,u.gg)(t.id,h);a&&"string"==typeof a.url?e=a.url:N("Failed to upload new avatar or get its URL. Please try again.")}let s=await (0,u.ck)(t.id,{...m,avatar_url:e});p(s),C("Profile updated successfully")}catch(e){console.error("Error updating profile:",e),N(e.message||"Failed to update profile")}finally{_(!1)}};return y?s.jsx("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-primary-600"})})}):(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Account Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsx(o.Zb,{children:s.jsx(o.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:"h-24 w-24 rounded-full bg-primary-100 flex items-center justify-center overflow-hidden mb-4 relative",children:f?s.jsx("img",{src:f,alt:"Profile",className:"h-full w-full object-cover"}):s.jsx(d.fzv,{className:"text-primary-600",size:36})}),(0,s.jsxs)("p",{className:"font-medium text-lg",children:[a?.first_name," ",a?.last_name]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:t?.email}),s.jsx("div",{className:"mt-4 w-full",children:(0,s.jsxs)("label",{className:"block w-full",children:[s.jsx("span",{className:"sr-only",children:"Choose profile photo"}),s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onloadend=()=>{b(a.result)},a.readAsDataURL(t),g(t)}}),(0,s.jsxs)(l.z,{type:"button",variant:"outline",className:"w-full",onClick:()=>{let e=document.querySelector('input[type="file"]');e?.click()},children:[s.jsx(d.Yjd,{className:"mr-2",size:16}),"Change Photo"]})]})})]})})})}),s.jsx("div",{className:"md:col-span-2",children:(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[s.jsx(o.ll,{children:"Profile Information"}),s.jsx(o.SZ,{children:"Update your personal information and public profile"})]}),s.jsx(o.aY,{children:(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[w&&(0,s.jsxs)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md flex items-center space-x-2 text-sm dark:bg-red-900/20 dark:text-red-400",children:[s.jsx(d.bcx,{className:"h-5 w-5 flex-shrink-0"}),s.jsx("span",{children:w})]}),P&&s.jsx("div",{className:"bg-green-50 text-green-600 p-3 rounded-md text-sm dark:bg-green-900/20 dark:text-green-400",children:P}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(n.I,{label:"First Name",name:"first_name",value:m.first_name,onChange:handleInputChange,required:!0}),s.jsx(n.I,{label:"Last Name",name:"last_name",value:m.last_name,onChange:handleInputChange,required:!0})]}),s.jsx(n.I,{label:"Bio",name:"bio",value:m.bio||"",onChange:handleInputChange,type:"textarea",rows:4,placeholder:"Write a short bio about yourself..."}),s.jsx(n.I,{label:"Institution",name:"institution",value:m.institution||"",onChange:handleInputChange,placeholder:"e.g., Stanford University"}),s.jsx(n.I,{label:"Location",name:"location",value:m.location||"",onChange:handleInputChange,placeholder:"e.g., San Francisco, CA"}),s.jsx(n.I,{label:"Field of Study",name:"field_of_study",value:m.field_of_study||"",onChange:handleInputChange,placeholder:"e.g., Computer Science"}),s.jsx(n.I,{label:"Website",name:"website",value:m.website||"",onChange:handleInputChange,placeholder:"e.g., https://yourwebsite.com"}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability"}),(0,s.jsxs)("select",{name:"availability",value:m.availability||"full-time",onChange:handleInputChange,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",children:[s.jsx("option",{value:"full-time",children:"Full Time"}),s.jsx("option",{value:"part-time",children:"Part Time"}),s.jsx("option",{value:"weekends",children:"Weekends Only"}),s.jsx("option",{value:"not-available",children:"Not Available"})]})]}),s.jsx("div",{className:"pt-4",children:(0,s.jsxs)(l.z,{type:"submit",isLoading:j,children:[s.jsx(d.mW3,{className:"mr-2",size:16}),"Save Changes"]})})]})})]})})]})]})}},14011:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>o});var s=a(95153);let r=(0,s.createProxy)(String.raw`/Users/shreyansh/ItsMightHappenApp/apps/web/app/settings/page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,o=n},57114:(e,t,a)=>{e.exports=a(4979)}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[998,450,105,781,505,217,971,662],()=>__webpack_exec__(88694));module.exports=a})();