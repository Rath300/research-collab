(()=>{var e={};e.id=322,e.ids=[322],e.modules={136:(e,r,s)=>{"use strict";s.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l,wL:()=>o});var a=s(687);s(3210);var t=s(2348);function n({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("bg-gray-900 border border-gray-800 shadow-sm rounded-md text-gray-100 dark:bg-black dark:border-gray-800",e),...r})}function l({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("p-6 flex flex-col space-y-1.5",e),...r})}function i({className:e,...r}){return(0,a.jsx)("h3",{className:(0,t.QP)("font-semibold leading-none tracking-tight text-gray-100 dark:text-gray-50",e),...r})}function d({className:e,...r}){return(0,a.jsx)("p",{className:(0,t.QP)("text-sm text-gray-400 dark:text-gray-400",e),...r})}function c({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("p-6 pt-0",e),...r})}function o({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("flex items-center p-6 pt-0",e),...r})}},575:(e,r,s)=>{Promise.resolve().then(s.bind(s,8710))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4313:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/page.tsx","default")},4726:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=s(5239),t=s(8088),n=s(8170),l=s.n(n),i=s(893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(r,d);let c={children:["",{children:["research",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4313)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,4206)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/research/page",pathname:"/research",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6663:(e,r,s)=>{Promise.resolve().then(s.bind(s,4313))},7838:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   \x1b[31mx\x1b[0m Expression expected\n      ,-[\x1b[36;1;4m/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/lib/api.js\x1b[0m:1156:1]\n \x1b[2m1153\x1b[0m | };\n \x1b[2m1154\x1b[0m | // Export all API methods and functions\n \x1b[2m1155\x1b[0m | \n \x1b[2m1156\x1b[0m |     }, function (payload) {\n      : \x1b[35;1m    ^\x1b[0m\n \x1b[2m1157\x1b[0m |         callback(payload.new);\n \x1b[2m1158\x1b[0m |     })\n \x1b[2m1159\x1b[0m |         .subscribe();\n      `----\n\n\nCaused by:\n    Syntax Error")},8444:(e,r,s)=>{"use strict";s.d(r,{p:()=>l});var a=s(687),t=s(3210),n=s(2348);let l=(0,t.forwardRef)(({label:e,helperText:r,error:s,leftIcon:t,rightIcon:l,isFullWidth:i=!1,size:d="md",className:c,containerClassName:o,labelClassName:x,inputClassName:m,helperTextClassName:p,errorClassName:h,...u},g)=>{let y={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-5 w-5"},f={left:{sm:"pl-7",md:"pl-9",lg:"pl-10"},right:{sm:"pr-7",md:"pr-9",lg:"pr-10"}},b="px-3";t&&(b=f.left[d]),l&&(b=f.right[d]),t&&l&&(b=`${f.left[d]} ${f.right[d]}`);let j=i?"w-full":"",v=s?"border-red-500 focus:ring-red-500":"border-gray-700 dark:border-gray-800";return(0,a.jsxs)("div",{className:(0,n.QP)("flex flex-col",j,o),children:[e&&(0,a.jsx)("label",{htmlFor:u.id,className:(0,n.QP)("block text-sm font-medium text-gray-200 dark:text-gray-300 mb-1",x),children:e}),(0,a.jsxs)("div",{className:"relative",children:[t&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400 dark:text-gray-500",children:(0,a.jsx)("span",{className:y[d],children:t})}),(0,a.jsx)("input",{ref:g,className:(0,n.QP)("bg-gray-900 border text-gray-100 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:bg-gray-950 dark:border-gray-800 dark:text-gray-100 dark:placeholder-gray-600",{sm:"py-1 text-xs rounded",md:"py-2 text-sm rounded-md",lg:"py-2.5 text-base rounded-md"}[d],b,v,j,m,c),...u}),l&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400 dark:text-gray-500",children:(0,a.jsx)("span",{className:y[d],children:l})})]}),s&&(0,a.jsx)("p",{className:(0,n.QP)("mt-1 text-xs text-red-400 dark:text-red-400",h),children:s}),r&&!s&&(0,a.jsx)("p",{className:(0,n.QP)("mt-1 text-xs text-gray-400 dark:text-gray-500",p),children:r})]})});l.displayName="Input"},8710:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var a=s(687),t=s(3210),n=s(6189),l=s(2294),i=s(8444),d=s(9622),c=s(6749),o=s(8391),x=s(7838),m=s(136);function p({onClose:e,onPostCreated:r}){let{user:s}=(0,o.nc)(),[n,d]=(0,t.useState)(""),[p,h]=(0,t.useState)(""),[u,g]=(0,t.useState)(""),[y,f]=(0,t.useState)([]),[b,j]=(0,t.useState)("public"),[v,N]=(0,t.useState)(!1),[k,w]=(0,t.useState)(""),P=()=>{let e=u.trim();e&&!y.includes(e)&&y.length<5&&(f([...y,e]),g(""))},C=e=>{f(y.filter(r=>r!==e))},_=async e=>{if(e.preventDefault(),!n.trim()||!p.trim())return void w("Please fill in all required fields");if(!s)return void w("You must be logged in to create a post");try{N(!0),w(""),await x.posts.create({title:n,content:p,user_id:s.id,tags:y.length>0?y:void 0,visibility:b,is_boosted:!1,engagement_count:0}),r()}catch(e){console.error("Error creating post:",e),w(e.message||"Failed to create post. Please try again.")}finally{N(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(m.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-auto",children:[(0,a.jsxs)(m.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(m.ZB,{children:"Create Research Post"}),(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:e,"aria-label":"Close",className:"h-8 w-8 p-0",children:(0,a.jsx)(c.yGN,{size:18})})]}),(0,a.jsxs)("form",{onSubmit:_,children:[(0,a.jsxs)(m.Wu,{className:"space-y-4",children:[k&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-600 p-3 rounded-md flex items-center space-x-2 text-sm dark:bg-red-900/20 dark:text-red-400",children:[(0,a.jsx)(c.y3G,{className:"h-5 w-5 flex-shrink-0"}),(0,a.jsx)("span",{children:k})]}),(0,a.jsx)(i.p,{label:"Title",placeholder:"Enter your research title",value:n,onChange:e=>d(e.target.value),required:!0,maxLength:100}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Content"}),(0,a.jsx)("textarea",{className:"flex w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent min-h-[200px] disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-700 dark:bg-gray-900",placeholder:"Describe your research, findings, or questions...",value:p,onChange:e=>h(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Tags (up to 5)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.p,{placeholder:"Add a tag (e.g., Machine Learning)",value:u,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),P())},className:"flex-1"}),(0,a.jsx)(l.$,{type:"button",onClick:P,disabled:!u.trim()||y.length>=5,children:"Add"})]}),y.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:y.map(e=>(0,a.jsxs)("div",{className:"bg-primary-100 text-primary-800 px-2 py-1 rounded-full text-sm flex items-center space-x-1 dark:bg-primary-900/20 dark:text-primary-300",children:[(0,a.jsx)(c.Qz2,{size:12}),(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>C(e),className:"ml-1 hover:text-red-500 focus:outline-none",children:(0,a.jsx)(c.yGN,{size:14})})]},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Visibility"}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"visibility",value:"public",checked:"public"===b,onChange:()=>j("public"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Public"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"visibility",value:"connections",checked:"connections"===b,onChange:()=>j("connections"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Connections Only"})]}),(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",name:"visibility",value:"private",checked:"private"===b,onChange:()=>j("private"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500"}),(0,a.jsx)("span",{className:"text-sm",children:"Private"})]})]})]})]}),(0,a.jsxs)(m.wL,{className:"flex justify-end space-x-2",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:e,disabled:v,children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",isLoading:v,children:"Publish"})]})]})]})})}function h(){let e=(0,n.useSearchParams)().get("tag"),{posts:r,isLoading:s,hasMore:m,setPosts:h,appendPosts:u,setLoading:y,setHasMore:f,resetPosts:b}=(0,o.YE)(),{user:j}=(0,o.nc)(),[v,N]=(0,t.useState)(""),[k,w]=(0,t.useState)(e?[e]:[]),[P,C]=(0,t.useState)(0),[_,$]=(0,t.useState)(!1),z=async(e=!1)=>{try{if(e&&(y(!0),b(),C(0)),s||!m&&!e)return;y(!0);let r=e?0:P,a=await x.posts.getResearchPosts({tags:k.length>0?k:void 0,limit:10,offset:r});e?h(a):u(a),C(r+a.length),f(10===a.length)}catch(e){console.error("Error loading posts:",e)}finally{y(!1)}},S=async e=>{if(j)try{let s=r.find(r=>r.id===e);if(!s)return;let a={...s,engagement_count:s.engagement_count+1};h(r.map(r=>r.id===e?a:r)),await x.posts.updateResearchPost(e,{engagement_count:a.engagement_count})}catch(e){console.error("Error liking post:",e),z(!0)}},A=async e=>{alert("Boost feature coming soon!")},E=e=>{w(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])};return(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Research Feed"}),(0,a.jsx)(l.$,{onClick:()=>$(!0),leftIcon:(0,a.jsx)(c.GGD,{}),children:"Create Post"})]}),(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)(i.p,{placeholder:"Search research posts...",value:v,onChange:e=>N(e.target.value),className:"flex-1",leftIcon:(0,a.jsx)(c.CKj,{})}),(0,a.jsx)(l.$,{variant:"outline",leftIcon:(0,a.jsx)(c.K7R,{}),children:"Filter"})]}),g.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:g.map(e=>(0,a.jsxs)("button",{onClick:()=>E(e),className:`px-3 py-1.5 rounded-full text-sm flex items-center ${k.includes(e)?"bg-primary-100 text-primary-800 dark:bg-primary-900/40 dark:text-primary-300":"bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700"}`,children:[(0,a.jsx)(c.cnX,{size:14,className:"mr-1.5"}),e]},e))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[r.length>0?r.map(e=>(0,a.jsx)(d.u,{post:e,onLike:S,onBoost:A},e.id)):s?null:(0,a.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No research posts found"}),k.length>0&&(0,a.jsx)(l.$,{variant:"ghost",onClick:()=>w([]),children:"Clear filters"})]}),s&&(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-primary-600"})}),!s&&!m&&r.length>0&&(0,a.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No more posts to load"})]}),_&&(0,a.jsx)(p,{onClose:()=>$(!1),onPostCreated:()=>{$(!1),z(!0)}})]})}function u(){return(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-primary-600"})})}),children:(0,a.jsx)(h,{})})}let g=["Machine Learning","Computer Science","Physics","Biology","Chemistry","Mathematics","Economics","Psychology","Neuroscience"]},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9622:(e,r,s)=>{"use strict";s.d(r,{u:()=>o});var a=s(687);s(3210);var t=s(3433),n=s.n(t),l=s(136),i=s(2294),d=s(6749),c=s(5814);function o({post:e,onLike:r,onBoost:s,onClick:t}){let{id:o,title:x,content:m,created_at:p,tags:h,is_boosted:u,engagement_count:g,profiles:y}=e,f=p?(0,c.A)(new Date(p),{addSuffix:!0}):"",b=y?`${y.first_name} ${y.last_name}`:"Unknown User",j=y?.institution||"Independent Researcher",v=y?.id,N=m.length>300?`${m.substring(0,300)}...`:m;return(0,a.jsxs)(l.Zp,{className:"mb-4 overflow-hidden hover:shadow-md transition-shadow duration-200",children:[(0,a.jsxs)(l.Wu,{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n(),{href:`/profile/${v}`,className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center overflow-hidden",children:y?.avatar_url?(0,a.jsx)("img",{src:y.avatar_url,alt:b,className:"h-full w-full object-cover"}):(0,a.jsx)(d.JXP,{className:"text-primary-600",size:20})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(n(),{href:`/profile/${v}`,className:"hover:underline",children:(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:b})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[j," â€¢ ",f]})]}),u&&(0,a.jsxs)("div",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full flex items-center text-xs font-medium dark:bg-yellow-900/30 dark:text-yellow-400",children:[(0,a.jsx)(d.FrA,{size:12,className:"mr-1"}),"Boosted"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n(),{href:`/research/${o}`,onClick:t,children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 hover:text-primary-600 dark:hover:text-primary-400",children:x})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-line",children:N}),m.length>300&&(0,a.jsx)(n(),{href:`/research/${o}`,className:"text-sm font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"Read more"})]}),h&&h.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,a.jsxs)(n(),{href:`/research?tag=${encodeURIComponent(e)}`,className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-md flex items-center hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",children:[(0,a.jsx)(d.cnX,{size:12,className:"mr-1"}),e]},e))})]}),(0,a.jsx)(l.wL,{className:"px-4 py-3 border-t border-gray-100 bg-gray-50 dark:border-gray-800 dark:bg-gray-900/50",children:(0,a.jsxs)("div",{className:"flex justify-between w-full",children:[(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>r?.(o),className:"text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(d.Ydy,{size:16,className:"mr-1"}),(0,a.jsx)("span",{children:g})]}),(0,a.jsx)(n(),{href:`/research/${o}`,passHref:!0,children:(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(d.mEP,{size:16,className:"mr-1"}),(0,a.jsx)("span",{children:"Comment"})]})}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-gray-400",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/research/${o}`)},children:[(0,a.jsx)(d.Pum,{size:16,className:"mr-1"}),(0,a.jsx)("span",{children:"Share"})]}),!u&&(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"text-yellow-600 dark:text-yellow-400",onClick:()=>s?.(o),children:[(0,a.jsx)(d.FrA,{size:16,className:"mr-1"}),(0,a.jsx)("span",{children:"Boost"})]})]})})]})}}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[447,165,956,510,886],()=>s(4726));module.exports=a})();