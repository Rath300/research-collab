(()=>{var e={};e.id=48,e.ids=[48],e.modules={136:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>c});var a=s(687);s(3210);var t=s(2348);function n({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("bg-gray-900 border border-gray-800 shadow-sm rounded-md text-gray-100 dark:bg-black dark:border-gray-800",e),...r})}function i({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("p-6 flex flex-col space-y-1.5",e),...r})}function l({className:e,...r}){return(0,a.jsx)("h3",{className:(0,t.QP)("font-semibold leading-none tracking-tight text-gray-100 dark:text-gray-50",e),...r})}function o({className:e,...r}){return(0,a.jsx)("p",{className:(0,t.QP)("text-sm text-gray-400 dark:text-gray-400",e),...r})}function d({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("p-6 pt-0",e),...r})}function c({className:e,...r}){return(0,a.jsx)("div",{className:(0,t.QP)("flex items-center p-6 pt-0",e),...r})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4791:(e,r,s)=>{Promise.resolve().then(s.bind(s,9609))},6543:(e,r,s)=>{Promise.resolve().then(s.bind(s,6595))},6595:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/[id]/page.tsx","default")},7136:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=s(5239),t=s(8088),n=s(8170),i=s.n(n),l=s(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(r,o);let d={children:["",{children:["research",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6595)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,4206)),"/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/app/research/[id]/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/research/[id]/page",pathname:"/research/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7838:()=>{throw Error("Module build failed (from ./node_modules/next/dist/build/webpack/loaders/next-swc-loader.js):\nError:   \x1b[31mx\x1b[0m Expression expected\n      ,-[\x1b[36;1;4m/Users/shreyansh/ItsMightHappenApp/research-collab-standalone/lib/api.js\x1b[0m:1156:1]\n \x1b[2m1153\x1b[0m | };\n \x1b[2m1154\x1b[0m | // Export all API methods and functions\n \x1b[2m1155\x1b[0m | \n \x1b[2m1156\x1b[0m |     }, function (payload) {\n      : \x1b[35;1m    ^\x1b[0m\n \x1b[2m1157\x1b[0m |         callback(payload.new);\n \x1b[2m1158\x1b[0m |     })\n \x1b[2m1159\x1b[0m |         .subscribe();\n      `----\n\n\nCaused by:\n    Syntax Error")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9609:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var a=s(687),t=s(3210),n=s(6189),i=s(3433),l=s.n(i),o=s(2294),d=s(136),c=s(6749),p=s(8391),x=s(7838),m=s(5814);function h(){let e=(0,n.useRouter)(),r=(0,n.useParams)(),{user:s}=(0,p.nc)(),[i,h]=(0,t.useState)(null),[u,g]=(0,t.useState)(!0),[f,b]=(0,t.useState)(""),[y,v]=(0,t.useState)(!1),j=async()=>{try{g(!0),b("");let e=await (0,x.getResearchPost)(r.id);h(e)}catch(e){console.error("Error loading post:",e),b(e.message||"Failed to load research post")}finally{g(!1)}},k=async()=>{if(i&&s)try{let e={...i,engagement_count:i.engagement_count+1};h(e),await (0,x.updateResearchPost)(i.id,{engagement_count:e.engagement_count})}catch(e){console.error("Error liking post:",e),j()}},w=async()=>{try{await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(e){console.error("Error copying to clipboard:",e)}},N=async()=>{if(i&&s)try{g(!0),await (0,x.deleteResearchPost)(i.id),e.push("/research")}catch(e){console.error("Error deleting post:",e),b("Failed to delete post. Please try again."),g(!1)}};if(u)return(0,a.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-b-2 border-t-2 border-primary-600"})})});if(f||!i)return(0,a.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-lg shadow",children:[(0,a.jsx)("p",{className:"text-red-500 dark:text-red-400 mb-4",children:f||"Post not found"}),(0,a.jsx)(o.$,{variant:"outline",onClick:()=>e.push("/research"),children:"Back to Research Feed"})]})});let P=i.created_at?(0,m.A)(new Date(i.created_at),{addSuffix:!0}):"",_=s&&i.user_id===s.id,C=i.profiles?`${i.profiles.first_name} ${i.profiles.last_name}`:"Unknown User",E=i.profiles?.institution||"Independent Researcher";return(0,a.jsxs)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(o.$,{variant:"ghost",className:"px-0 py-0 h-auto text-primary-600 dark:text-primary-400",onClick:()=>e.push("/research"),children:[(0,a.jsx)(c.kRp,{className:"mr-2"}),"Back to Research Feed"]})}),(0,a.jsx)(d.Zp,{children:(0,a.jsxs)(d.Wu,{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(l(),{href:`/profile/${i.user_id}`,className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-primary-100 flex items-center justify-center overflow-hidden",children:i.profiles?.avatar_url?(0,a.jsx)("img",{src:i.profiles.avatar_url,alt:C,className:"h-full w-full object-cover"}):(0,a.jsx)(c.JXP,{className:"text-primary-600",size:24})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)(l(),{href:`/profile/${i.user_id}`,className:"hover:underline",children:(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:C})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[E," â€¢ ",P]})]}),i.is_boosted&&(0,a.jsxs)("div",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full flex items-center text-sm font-medium dark:bg-yellow-900/30 dark:text-yellow-400",children:[(0,a.jsx)(c.FrA,{size:16,className:"mr-1.5"}),"Boosted"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:i.title}),(0,a.jsx)("div",{className:"prose prose-gray dark:prose-invert max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line",children:i.content})})]}),i.tags&&i.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 pt-2",children:i.tags.map(e=>(0,a.jsxs)(l(),{href:`/research?tag=${encodeURIComponent(e)}`,className:"px-3 py-1 bg-gray-100 text-gray-800 text-sm rounded-md flex items-center hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",children:[(0,a.jsx)(c.cnX,{size:14,className:"mr-1.5"}),e]},e))}),(0,a.jsxs)("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-4 flex flex-wrap justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex space-x-2 sm:space-x-4",children:[(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",onClick:k,className:"text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(c.Ydy,{size:18,className:"mr-1.5"}),(0,a.jsx)("span",{children:i.engagement_count||0})]}),(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(c.mEP,{size:18,className:"mr-1.5"}),(0,a.jsx)("span",{children:"Comment"})]}),(0,a.jsxs)(o.$,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-gray-400",onClick:w,children:[(0,a.jsx)(c.Pum,{size:18,className:"mr-1.5"}),(0,a.jsx)("span",{children:"Share"})]})]}),_&&(0,a.jsxs)("div",{className:"flex space-x-2 mt-4 sm:mt-0",children:[(0,a.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>e.push(`/research/edit/${i.id}`),children:"Edit"}),y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.$,{variant:"destructive",size:"sm",onClick:N,isLoading:u,children:"Confirm"}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>v(!1),children:"Cancel"})]}):(0,a.jsx)(o.$,{variant:"destructive",size:"sm",onClick:()=>v(!0),children:"Delete"})]})]})]})})]})}}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[447,165,956,510,886],()=>s(7136));module.exports=a})();